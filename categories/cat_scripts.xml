<?xml version="1.0" encoding="utf-8"?>
<?xml-stylesheet type="text/xsl" href="../assets/xml/rss.xsl" media="all"?><rss xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:atom="http://www.w3.org/2005/Atom" version="2.0"><channel><title>Tom's Blog (scripts)</title><link>http://tomaugspurger.github.io/</link><description></description><atom:link type="application/rss+xml" href="http://tomaugspurger.github.io/categories/cat_scripts.xml" rel="self"></atom:link><language>en</language><lastBuildDate>Wed, 25 Mar 2015 00:34:17 GMT</lastBuildDate><generator>http://getnikola.com/</generator><docs>http://blogs.law.harvard.edu/tech/rss</docs><item><title>Modern Pandas (1)</title><link>http://tomaugspurger.github.io/posts/modern-pandas1.html</link><dc:creator>Tom Augspurger</dc:creator><description>&lt;div tabindex="-1" id="notebook" class="border-box-sizing"&gt;
    &lt;div class="container" id="notebook-container"&gt;

&lt;div class="cell border-box-sizing text_cell rendered"&gt;
&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;
&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;p&gt;Modern Pandas (1): Data Structures&lt;/p&gt;
&lt;h4 id="Data-Structures"&gt;Data Structures&lt;a class="anchor-link" href="http://tomaugspurger.github.io/posts/modern-pandas1.html#Data-Structures"&gt;¶&lt;/a&gt;&lt;/h4&gt;&lt;p&gt;pandas has two main Data structures you need to worry about. &lt;code&gt;DataFrame&lt;/code&gt; and &lt;code&gt;Series&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;&lt;code&gt;DataFrame&lt;/code&gt;s are for 2-dimensional, tabular data. These contain your data and define a ton of useful methods.&lt;/p&gt;
&lt;p&gt;&lt;code&gt;Series&lt;/code&gt; are the 1-dimensional version of DataFrames. Why the distinction? Certain methods only make sense on a 1-dimensional structure.&lt;/p&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing code_cell rendered"&gt;
&lt;div class="input"&gt;
&lt;div class="prompt input_prompt"&gt;In [ ]:&lt;/div&gt;
&lt;div class="inner_cell"&gt;
    &lt;div class="input_area"&gt;
&lt;div class=" highlight hl-ipython3"&gt;&lt;pre&gt; 
&lt;/pre&gt;&lt;/div&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;/div&gt;
    &lt;/div&gt;
  &lt;/div&gt;
</description><category>data science</category><category>python</category><category>scripts</category><guid>http://tomaugspurger.github.io/posts/modern-pandas1.html</guid><pubDate>Tue, 24 Mar 2015 21:00:00 GMT</pubDate></item><item><title>Tidy Data in Action</title><link>http://tomaugspurger.github.io/posts/Tidy Data in Action.html</link><dc:creator>Tom Augspurger</dc:creator><description>&lt;div tabindex="-1" id="notebook" class="border-box-sizing"&gt;
    &lt;div class="container" id="notebook-container"&gt;

&lt;div class="cell border-box-sizing text_cell rendered"&gt;
&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;
&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;p&gt;&lt;a href="http://had.co.nz"&gt;Hadley Whickham&lt;/a&gt; wrote a famous paper (for a certain definition of famous) about the importance of &lt;a href="http://vita.had.co.nz/papers/tidy-data.pdf"&gt;tidy data&lt;/a&gt; when doing data analysis.
I want to talk a bit about that, using an example from a StackOverflow post, with a solution using &lt;a href="http://pandas.pydata.org"&gt;pandas&lt;/a&gt;. The principles of tidy data aren't language specific.&lt;/p&gt;
&lt;p&gt;A tidy dataset must satisfy three criteria (page 4 in &lt;a href="http://vita.had.co.nz/papers/tidy-data.pdf"&gt;Whickham's paper&lt;/a&gt;):&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;Each variable forms a column.&lt;/li&gt;
&lt;li&gt;Each observation forms a row.&lt;/li&gt;
&lt;li&gt;Each type of observational unit forms a table.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;In this &lt;a href="http://stackoverflow.com/questions/22695680/python-pandas-timedelta-specific-rows"&gt;StackOverflow post&lt;/a&gt;, the asker had some data NBA games, and wanted to know the number of days since a team last played. Here's the example data:&lt;/p&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing code_cell rendered"&gt;
&lt;div class="input"&gt;
&lt;div class="prompt input_prompt"&gt;In [1]:&lt;/div&gt;
&lt;div class="inner_cell"&gt;
    &lt;div class="input_area"&gt;
&lt;div class=" highlight hl-ipython3"&gt;&lt;pre&gt;&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;datetime&lt;/span&gt;

&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;pandas&lt;/span&gt; &lt;span class="k"&gt;as&lt;/span&gt; &lt;span class="nn"&gt;pd&lt;/span&gt;

&lt;span class="n"&gt;df&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;pd&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;DataFrame&lt;/span&gt;&lt;span class="p"&gt;({&lt;/span&gt;&lt;span class="s"&gt;'HomeTeam'&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s"&gt;'HOU'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s"&gt;'CHI'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s"&gt;'DAL'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s"&gt;'HOU'&lt;/span&gt;&lt;span class="p"&gt;],&lt;/span&gt;
                   &lt;span class="s"&gt;'AwayTeam'&lt;/span&gt; &lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s"&gt;'CHI'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s"&gt;'DAL'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s"&gt;'CHI'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s"&gt;'DAL'&lt;/span&gt;&lt;span class="p"&gt;],&lt;/span&gt;
                   &lt;span class="s"&gt;'HomeGameNum'&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;],&lt;/span&gt;
                   &lt;span class="s"&gt;'AwayGameNum'&lt;/span&gt; &lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;],&lt;/span&gt;
                   &lt;span class="s"&gt;'Date'&lt;/span&gt; &lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;datetime&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;date&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;2014&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;11&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt; &lt;span class="n"&gt;datetime&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;date&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;2014&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;12&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;
                             &lt;span class="n"&gt;datetime&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;date&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;2014&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;14&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt; &lt;span class="n"&gt;datetime&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;date&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;2014&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;15&lt;/span&gt;&lt;span class="p"&gt;)]})&lt;/span&gt;
&lt;span class="n"&gt;df&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;div class="output_wrapper"&gt;
&lt;div class="output"&gt;


&lt;div class="output_area"&gt;&lt;div class="prompt output_prompt"&gt;Out[1]:&lt;/div&gt;

&lt;div class="output_html rendered_html output_subarea output_execute_result"&gt;
&lt;div style="max-height:1000px;max-width:1500px;overflow:auto;"&gt;
&lt;table border="1" class="dataframe"&gt;
  &lt;thead&gt;
    &lt;tr style="text-align: right;"&gt;
      &lt;th&gt;&lt;/th&gt;
      &lt;th&gt;AwayGameNum&lt;/th&gt;
      &lt;th&gt;AwayTeam&lt;/th&gt;
      &lt;th&gt;Date&lt;/th&gt;
      &lt;th&gt;HomeGameNum&lt;/th&gt;
      &lt;th&gt;HomeTeam&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;th&gt;0&lt;/th&gt;
      &lt;td&gt; 1&lt;/td&gt;
      &lt;td&gt; CHI&lt;/td&gt;
      &lt;td&gt; 2014-03-11&lt;/td&gt;
      &lt;td&gt; 1&lt;/td&gt;
      &lt;td&gt; HOU&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;1&lt;/th&gt;
      &lt;td&gt; 1&lt;/td&gt;
      &lt;td&gt; DAL&lt;/td&gt;
      &lt;td&gt; 2014-03-12&lt;/td&gt;
      &lt;td&gt; 2&lt;/td&gt;
      &lt;td&gt; CHI&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;2&lt;/th&gt;
      &lt;td&gt; 3&lt;/td&gt;
      &lt;td&gt; CHI&lt;/td&gt;
      &lt;td&gt; 2014-03-14&lt;/td&gt;
      &lt;td&gt; 2&lt;/td&gt;
      &lt;td&gt; DAL&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;3&lt;/th&gt;
      &lt;td&gt; 3&lt;/td&gt;
      &lt;td&gt; DAL&lt;/td&gt;
      &lt;td&gt; 2014-03-15&lt;/td&gt;
      &lt;td&gt; 2&lt;/td&gt;
      &lt;td&gt; HOU&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;4 rows × 5 columns&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;/div&gt;

&lt;/div&gt;
&lt;/div&gt;

&lt;/div&gt;
&lt;div class="cell border-box-sizing text_cell rendered"&gt;
&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;
&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;p&gt;I want to focus on the second of the three criteria: &lt;em&gt;Each observation forms a row.&lt;/em&gt;
Realize that the structure your dataset should take reflects the question you're trying to answer.
For the SO question, we want to answer "How many days has it been since this team's last game?"
Given this context what is an observation?&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;We'll define an observation as a team playing on a day.
Does the original dataset in &lt;code&gt;df&lt;/code&gt; satisfy the criteria for tidy data?
No, it doesn't since each row contains &lt;strong&gt;2&lt;/strong&gt; observations, one for the home team and one for the away team.&lt;/p&gt;
&lt;p&gt;Let's tidy up the dataset.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;I repeat each row (once for each team) and drop the game numbers (I don't need them for this example)&lt;/li&gt;
&lt;li&gt;Select just the new rows (the one with odd indicies, &lt;code&gt;%&lt;/code&gt; is the &lt;a href="http://en.wikipedia.org/wiki/Modulo_operation"&gt;modulo operator&lt;/a&gt; in python)&lt;/li&gt;
&lt;li&gt;Overwrite the value of &lt;code&gt;Team&lt;/code&gt; for the new rows, keeping the existing value for the old rows&lt;/li&gt;
&lt;li&gt;rename the &lt;code&gt;HomeTeam&lt;/code&gt; column to &lt;code&gt;is_home&lt;/code&gt; and make it a boolen column (True when the team is home)&lt;/li&gt;
&lt;/ul&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing code_cell rendered"&gt;
&lt;div class="input"&gt;
&lt;div class="prompt input_prompt"&gt;In [2]:&lt;/div&gt;
&lt;div class="inner_cell"&gt;
    &lt;div class="input_area"&gt;
&lt;div class=" highlight hl-ipython3"&gt;&lt;pre&gt;&lt;span class="n"&gt;s&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;df&lt;/span&gt;&lt;span class="p"&gt;[[&lt;/span&gt;&lt;span class="s"&gt;'Date'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s"&gt;'HomeTeam'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s"&gt;'AwayTeam'&lt;/span&gt;&lt;span class="p"&gt;]]&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;reindex_axis&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;df&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;index&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;repeat&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;reset_index&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;drop&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="k"&gt;True&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;s&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;rename&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;columns&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="s"&gt;'AwayTeam'&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s"&gt;'Team'&lt;/span&gt;&lt;span class="p"&gt;})&lt;/span&gt;

&lt;span class="n"&gt;new&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="p"&gt;[(&lt;/span&gt;&lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;index&lt;/span&gt; &lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;astype&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;bool&lt;/span&gt;&lt;span class="p"&gt;)]&lt;/span&gt;

&lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;loc&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;new&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;index&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s"&gt;'Team'&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;new&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;loc&lt;/span&gt;&lt;span class="p"&gt;[:,&lt;/span&gt; &lt;span class="s"&gt;'HomeTeam'&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;

&lt;span class="n"&gt;s&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;rename&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;columns&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="s"&gt;'HomeTeam'&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s"&gt;'is_home'&lt;/span&gt;&lt;span class="p"&gt;})&lt;/span&gt;
&lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s"&gt;'is_home'&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s"&gt;'Team'&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s"&gt;'is_home'&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
&lt;span class="n"&gt;s&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;div class="output_wrapper"&gt;
&lt;div class="output"&gt;


&lt;div class="output_area"&gt;&lt;div class="prompt output_prompt"&gt;Out[2]:&lt;/div&gt;

&lt;div class="output_html rendered_html output_subarea output_execute_result"&gt;
&lt;div style="max-height:1000px;max-width:1500px;overflow:auto;"&gt;
&lt;table border="1" class="dataframe"&gt;
  &lt;thead&gt;
    &lt;tr style="text-align: right;"&gt;
      &lt;th&gt;&lt;/th&gt;
      &lt;th&gt;Date&lt;/th&gt;
      &lt;th&gt;is_home&lt;/th&gt;
      &lt;th&gt;Team&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;th&gt;0&lt;/th&gt;
      &lt;td&gt; 2014-03-11&lt;/td&gt;
      &lt;td&gt; False&lt;/td&gt;
      &lt;td&gt; CHI&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;1&lt;/th&gt;
      &lt;td&gt; 2014-03-11&lt;/td&gt;
      &lt;td&gt;  True&lt;/td&gt;
      &lt;td&gt; HOU&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;2&lt;/th&gt;
      &lt;td&gt; 2014-03-12&lt;/td&gt;
      &lt;td&gt; False&lt;/td&gt;
      &lt;td&gt; DAL&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;3&lt;/th&gt;
      &lt;td&gt; 2014-03-12&lt;/td&gt;
      &lt;td&gt;  True&lt;/td&gt;
      &lt;td&gt; CHI&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;4&lt;/th&gt;
      &lt;td&gt; 2014-03-14&lt;/td&gt;
      &lt;td&gt; False&lt;/td&gt;
      &lt;td&gt; CHI&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;5&lt;/th&gt;
      &lt;td&gt; 2014-03-14&lt;/td&gt;
      &lt;td&gt;  True&lt;/td&gt;
      &lt;td&gt; DAL&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;6&lt;/th&gt;
      &lt;td&gt; 2014-03-15&lt;/td&gt;
      &lt;td&gt; False&lt;/td&gt;
      &lt;td&gt; DAL&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;7&lt;/th&gt;
      &lt;td&gt; 2014-03-15&lt;/td&gt;
      &lt;td&gt;  True&lt;/td&gt;
      &lt;td&gt; HOU&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;8 rows × 3 columns&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;/div&gt;

&lt;/div&gt;
&lt;/div&gt;

&lt;/div&gt;
&lt;div class="cell border-box-sizing text_cell rendered"&gt;
&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;
&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;p&gt;Now that we have a 1:1 correspondance between rows and observations, answering the question is simple.&lt;/p&gt;
&lt;p&gt;We'll just group by each team and find the difference between each consecutive &lt;code&gt;Date&lt;/code&gt; for that team.
Then subtract one day so that back to back games reflect 0 days of rest.&lt;/p&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing code_cell rendered"&gt;
&lt;div class="input"&gt;
&lt;div class="prompt input_prompt"&gt;In [3]:&lt;/div&gt;
&lt;div class="inner_cell"&gt;
    &lt;div class="input_area"&gt;
&lt;div class=" highlight hl-ipython3"&gt;&lt;pre&gt;&lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s"&gt;'rest'&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;groupby&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;'Team'&lt;/span&gt;&lt;span class="p"&gt;)[&lt;/span&gt;&lt;span class="s"&gt;'Date'&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;diff&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="n"&gt;datetime&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;timedelta&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;s&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;div class="output_wrapper"&gt;
&lt;div class="output"&gt;


&lt;div class="output_area"&gt;&lt;div class="prompt output_prompt"&gt;Out[3]:&lt;/div&gt;

&lt;div class="output_html rendered_html output_subarea output_execute_result"&gt;
&lt;div style="max-height:1000px;max-width:1500px;overflow:auto;"&gt;
&lt;table border="1" class="dataframe"&gt;
  &lt;thead&gt;
    &lt;tr style="text-align: right;"&gt;
      &lt;th&gt;&lt;/th&gt;
      &lt;th&gt;Date&lt;/th&gt;
      &lt;th&gt;is_home&lt;/th&gt;
      &lt;th&gt;Team&lt;/th&gt;
      &lt;th&gt;rest&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;th&gt;0&lt;/th&gt;
      &lt;td&gt; 2014-03-11&lt;/td&gt;
      &lt;td&gt; False&lt;/td&gt;
      &lt;td&gt; CHI&lt;/td&gt;
      &lt;td&gt;   NaT&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;1&lt;/th&gt;
      &lt;td&gt; 2014-03-11&lt;/td&gt;
      &lt;td&gt;  True&lt;/td&gt;
      &lt;td&gt; HOU&lt;/td&gt;
      &lt;td&gt;   NaT&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;2&lt;/th&gt;
      &lt;td&gt; 2014-03-12&lt;/td&gt;
      &lt;td&gt; False&lt;/td&gt;
      &lt;td&gt; DAL&lt;/td&gt;
      &lt;td&gt;   NaT&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;3&lt;/th&gt;
      &lt;td&gt; 2014-03-12&lt;/td&gt;
      &lt;td&gt;  True&lt;/td&gt;
      &lt;td&gt; CHI&lt;/td&gt;
      &lt;td&gt;0 days&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;4&lt;/th&gt;
      &lt;td&gt; 2014-03-14&lt;/td&gt;
      &lt;td&gt; False&lt;/td&gt;
      &lt;td&gt; CHI&lt;/td&gt;
      &lt;td&gt;1 days&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;5&lt;/th&gt;
      &lt;td&gt; 2014-03-14&lt;/td&gt;
      &lt;td&gt;  True&lt;/td&gt;
      &lt;td&gt; DAL&lt;/td&gt;
      &lt;td&gt;1 days&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;6&lt;/th&gt;
      &lt;td&gt; 2014-03-15&lt;/td&gt;
      &lt;td&gt; False&lt;/td&gt;
      &lt;td&gt; DAL&lt;/td&gt;
      &lt;td&gt;0 days&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;7&lt;/th&gt;
      &lt;td&gt; 2014-03-15&lt;/td&gt;
      &lt;td&gt;  True&lt;/td&gt;
      &lt;td&gt; HOU&lt;/td&gt;
      &lt;td&gt;3 days&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;8 rows × 4 columns&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;/div&gt;

&lt;/div&gt;
&lt;/div&gt;

&lt;/div&gt;
&lt;div class="cell border-box-sizing text_cell rendered"&gt;
&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;
&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;p&gt;I planned on comparing that one line solution to the code needed with the messy data.
But honestly, I'm having trouble writing the messy data version.
You don't really have anything to group on, so you'd need to keep track of the row where you last saw this team (either in &lt;code&gt;AwayTeam&lt;/code&gt; or &lt;code&gt;HomeTeam&lt;/code&gt;).
And then each row will have two answers, one for each team.
It's certainly possible to write the necessary code, but the fact that I'm struggling so much to write the messy version is pretty good evidence for the importance of tidy data.&lt;/p&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
    &lt;/div&gt;
  &lt;/div&gt;
</description><category>data science</category><category>python</category><category>scripts</category><guid>http://tomaugspurger.github.io/posts/Tidy Data in Action.html</guid><pubDate>Thu, 27 Mar 2014 21:00:00 GMT</pubDate></item><item><title>Visualizing Missing Data</title><link>http://tomaugspurger.github.io/posts/Visualizing Missing Data.html</link><dc:creator>Tom Augspurger</dc:creator><description>&lt;div tabindex="-1" id="notebook" class="border-box-sizing"&gt;
    &lt;div class="container" id="notebook-container"&gt;

&lt;div class="cell border-box-sizing text_cell rendered"&gt;
&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;
&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;p&gt;&lt;a href="http://stackoverflow.com/questions/21925114/is-there-an-implementation-of-missingmaps-in-pythons-ecosystem"&gt;This&lt;/a&gt;
StackOverflow question asked how to visualize missing data in Python.
The question author linked to this chart, created in R.&lt;/p&gt;
&lt;p&gt;&lt;img src="http://i.stack.imgur.com/kr7Ks.png" alt=""&gt;&lt;/p&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing text_cell rendered"&gt;
&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;
&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;p&gt;I wasn't aware of any existing implementation, and it didn't seem all that difficult, so I decided to write my own.  Here's the result.&lt;/p&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing code_cell rendered"&gt;
&lt;div class="input"&gt;
&lt;div class="prompt input_prompt"&gt;In [1]:&lt;/div&gt;
&lt;div class="inner_cell"&gt;
    &lt;div class="input_area"&gt;
&lt;div class=" highlight hl-ipython3"&gt;&lt;pre&gt;&lt;span class="o"&gt;%&lt;/span&gt;&lt;span class="k"&gt;matplotlib&lt;/span&gt; inline

&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;pandas&lt;/span&gt; &lt;span class="k"&gt;as&lt;/span&gt; &lt;span class="nn"&gt;pd&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;matplotlib.pyplot&lt;/span&gt; &lt;span class="k"&gt;as&lt;/span&gt; &lt;span class="nn"&gt;plt&lt;/span&gt;

&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;missingmap&lt;/span&gt; &lt;span class="k"&gt;import&lt;/span&gt; &lt;span class="n"&gt;missmap&lt;/span&gt;

&lt;span class="n"&gt;df&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;pd&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;read_csv&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;'https://raw.github.com/mattdelhey/kaggle-titanic/master/Data/train.csv'&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;df&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;head&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;div class="output_wrapper"&gt;
&lt;div class="output"&gt;


&lt;div class="output_area"&gt;&lt;div class="prompt output_prompt"&gt;Out[1]:&lt;/div&gt;

&lt;div class="output_html rendered_html output_subarea output_execute_result"&gt;
&lt;div style="max-height:1000px;max-width:1500px;overflow:auto;"&gt;
&lt;table border="1" class="dataframe"&gt;
  &lt;thead&gt;
    &lt;tr style="text-align: right;"&gt;
      &lt;th&gt;&lt;/th&gt;
      &lt;th&gt;survived&lt;/th&gt;
      &lt;th&gt;pclass&lt;/th&gt;
      &lt;th&gt;name&lt;/th&gt;
      &lt;th&gt;sex&lt;/th&gt;
      &lt;th&gt;age&lt;/th&gt;
      &lt;th&gt;sibsp&lt;/th&gt;
      &lt;th&gt;parch&lt;/th&gt;
      &lt;th&gt;ticket&lt;/th&gt;
      &lt;th&gt;fare&lt;/th&gt;
      &lt;th&gt;cabin&lt;/th&gt;
      &lt;th&gt;embarked&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;th&gt;0&lt;/th&gt;
      &lt;td&gt; 0&lt;/td&gt;
      &lt;td&gt; 3&lt;/td&gt;
      &lt;td&gt;                           Braund, Mr. Owen Harris&lt;/td&gt;
      &lt;td&gt;   male&lt;/td&gt;
      &lt;td&gt; 22&lt;/td&gt;
      &lt;td&gt; 1&lt;/td&gt;
      &lt;td&gt; 0&lt;/td&gt;
      &lt;td&gt;        A/5 21171&lt;/td&gt;
      &lt;td&gt;  7.2500&lt;/td&gt;
      &lt;td&gt;  NaN&lt;/td&gt;
      &lt;td&gt; S&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;1&lt;/th&gt;
      &lt;td&gt; 1&lt;/td&gt;
      &lt;td&gt; 1&lt;/td&gt;
      &lt;td&gt; Cumings, Mrs. John Bradley (Florence Briggs Th...&lt;/td&gt;
      &lt;td&gt; female&lt;/td&gt;
      &lt;td&gt; 38&lt;/td&gt;
      &lt;td&gt; 1&lt;/td&gt;
      &lt;td&gt; 0&lt;/td&gt;
      &lt;td&gt;         PC 17599&lt;/td&gt;
      &lt;td&gt; 71.2833&lt;/td&gt;
      &lt;td&gt;  C85&lt;/td&gt;
      &lt;td&gt; C&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;2&lt;/th&gt;
      &lt;td&gt; 1&lt;/td&gt;
      &lt;td&gt; 3&lt;/td&gt;
      &lt;td&gt;                            Heikkinen, Miss. Laina&lt;/td&gt;
      &lt;td&gt; female&lt;/td&gt;
      &lt;td&gt; 26&lt;/td&gt;
      &lt;td&gt; 0&lt;/td&gt;
      &lt;td&gt; 0&lt;/td&gt;
      &lt;td&gt; STON/O2. 3101282&lt;/td&gt;
      &lt;td&gt;  7.9250&lt;/td&gt;
      &lt;td&gt;  NaN&lt;/td&gt;
      &lt;td&gt; S&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;3&lt;/th&gt;
      &lt;td&gt; 1&lt;/td&gt;
      &lt;td&gt; 1&lt;/td&gt;
      &lt;td&gt;      Futrelle, Mrs. Jacques Heath (Lily May Peel)&lt;/td&gt;
      &lt;td&gt; female&lt;/td&gt;
      &lt;td&gt; 35&lt;/td&gt;
      &lt;td&gt; 1&lt;/td&gt;
      &lt;td&gt; 0&lt;/td&gt;
      &lt;td&gt;           113803&lt;/td&gt;
      &lt;td&gt; 53.1000&lt;/td&gt;
      &lt;td&gt; C123&lt;/td&gt;
      &lt;td&gt; S&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;4&lt;/th&gt;
      &lt;td&gt; 0&lt;/td&gt;
      &lt;td&gt; 3&lt;/td&gt;
      &lt;td&gt;                          Allen, Mr. William Henry&lt;/td&gt;
      &lt;td&gt;   male&lt;/td&gt;
      &lt;td&gt; 35&lt;/td&gt;
      &lt;td&gt; 0&lt;/td&gt;
      &lt;td&gt; 0&lt;/td&gt;
      &lt;td&gt;           373450&lt;/td&gt;
      &lt;td&gt;  8.0500&lt;/td&gt;
      &lt;td&gt;  NaN&lt;/td&gt;
      &lt;td&gt; S&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;/div&gt;

&lt;/div&gt;
&lt;/div&gt;

&lt;/div&gt;
&lt;div class="cell border-box-sizing code_cell rendered"&gt;
&lt;div class="input"&gt;
&lt;div class="prompt input_prompt"&gt;In [2]:&lt;/div&gt;
&lt;div class="inner_cell"&gt;
    &lt;div class="input_area"&gt;
&lt;div class=" highlight hl-ipython3"&gt;&lt;pre&gt;&lt;span class="n"&gt;fig&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;ax&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;plt&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;subplots&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;figsize&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;13&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;8&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
&lt;span class="n"&gt;ax&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;missmap&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;df&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;title&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;'Titanic Missing Data Map'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;ax&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;ax&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;div class="output_wrapper"&gt;
&lt;div class="output"&gt;


&lt;div class="output_area"&gt;&lt;div class="prompt"&gt;&lt;/div&gt;


&lt;div class="output_png output_subarea "&gt;
&lt;img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAuMAAAIMCAYAAABfb6LzAAAABHNCSVQICAgIfAhkiAAAAAlwSFlz%0AAAALEgAACxIB0t1+/AAAIABJREFUeJzt3X+cXHdd7/H37I+UCsoPuZRCuo2kuR+4gGIRLciP1BTl%0A6kWi10iiMYgiIhakNk0TUSlcELggWCjlh5dfAiLBSxBFqAqFQGxuJUEotn6a7GZ/pWnYqkgm2d3Z%0AnTn3jzNrtnH3nHB2Zj8zc17PxyOP7G52Z9893Uw+5zuf7+dbSZJEAAAAAFZfX3QAAAAAoKwoxgEA%0AAIAgFOMAAABAEIpxAAAAIAjFOAAAABCEYhwAAAAIMhAdAACKMLMbJT2z+e7jJY1Imm6+/25JD3b3%0AN5rZiyQNuvs7C36fJ0va7e5bzvPz1zWzfMndn3XOn71f0gskPVzSYyRdf76Pe87jvFrSUXf/0Hf6%0AtUs81kZJn5H0z80P9UuqSnqNu3/2PL7+jyW9090Pfwff8wOSdkja5O63Lvr4OqXX7h3u/rLzfTwA%0A6GYU4wC6krv/1sLbZnZM0i8sUxA+XdIdK/g+hyR9pwXzjKQNZjbk7uPNjA9sZkmaj/uVAo+7kOlV%0ARb4uw1F3/8GFd8zs+yXdYmbPc/fbc772Kknv+g6/XyJpXNJ2Sbcu+vgOSSebfw4ApUAxDqDnmNkN%0Akr5X0uckPVfSVWZ2RtInlK6aP0LSIyWNSfp5d58ys1FJ75e0SdKQpI+5+/XNleO3u/sTzexBkt4u%0A6WmS5iV90t1fuUSEuqSPSfpFSa9vfuxnJX1S0rXNjIsf9+mS/lDpqnQi6fXu/omMj39A0h3u/odm%0ANtP8Hs+W9ChJN7r7jWbWL+lNzf/+f5d0u6THufuVedfP3b9uZm+TdI2kbWZ2haQ3SrpA0sWS/tbd%0AX2Rmr2t+zw+b2QuUtj7+p89b5tv8maRfNbML3H22+bGfl7S3+TjK+L7rJH1Z0i2SLpdUkXS1u385%0A778NADoNPeMAelEiKXH3T0r6lKS3NNtUni/pgLs/zd0fI+mMpF9a9DUPdPdnKi22X2Zml57zuK+R%0AtEbSYyU9SdKPmtkztbQPKV35XbBD0geW+dxXNzP+kKRfkbRQMN+wzMcTnV09XiNpyt2fLunnJL3B%0AzC6Q9CKlherjJT1VaVvMd7Li/HVJT2y+/XJJv+fuVzQf76fN7AebNyL3SPrF5gr6kp+3zONPSbpN%0A0vMkqXnjcZekf130OVmP9yhJtzZX9K+X9LHmDQgAdBWKcQC9qnLu2+7+NkkHzey3zeydkp4g6YGL%0APu8vmp93j6RvSnrYOY+5SdJ73T1x9zl33+ju+5f65s2WmYaZXW5ml0j6bnf/p2WyfkzSO8zsw5Ke%0ALGlhtX3vMh8/1180f/+q0lXkB0r6SUkfdPeau88pfUWgsszXLyVRerMipX3uDzOzPZJulvRdkh60%0AxNec7+ct+BOdvWF5gdJXJs738b7t7h+WJHe/RemrEd9/3v91ANAhKMYB9Krk3LfN7I1KV6FPKi1O%0A/0b3L1Cnz/mac4vX+cXvmNmjzezcgn2xhdXx7UoLzyW5+3uUrkL/raSfkPR1M/ue5T6+xENMNx9n%0A4b+5ImlO93+Ob2TkXMpTlK6OS2lLyHOUrly/WtKkli7sz/fzpPT6fkrSj5jZWknPUNp2UtHZ/3dZ%0Aj1c/5/H6lvgYAHQ8inEAvaiis0XbvNJWDkn6cUl/5O4fUdom8Wyl/djn6+8kvcDMKs1WkE/o7ESX%0ApXxYaR/08yX96XKfZGZ/L+kH3f2Dkn5d0kMkPdTMDiz1ceWvcCeSPi1pu5mtMbMBSb+s8yzIzeyH%0AJb1E0o1m9lClq/K7m20/ayVdprPXbV7SmvP4vHNV3L0maZ/Sm5ZPuftCMV0xs4fkPN5Dzeynmnmf%0AK6mmFWzUBYAobOAE0IsW91R/RtJNZpYo7fl+s5n9jtI2lD9XWuCd72O9WtKNkr6mtCj8s2ahuNTX%0AyN3vMbM7JX3L3b+1+M/Oefs6pYXva5UWzDe4+5iZ7Vrm40s9xrnvf0CSKW1dqUo6pvuv/C/+/PVm%0A9tXm+w2lGz63ufsdkmRmr5d02MzukXSnpL9Wet1uVbop9WNKe9SzPm/Ja6T0FYMvSfrNRR9P3P1b%0AGd93ROnK//Obm0inJf3MolcGAKBrVJKE5y4A6DVm9mxJj2i+CrAwl/2Mu++JTbZyzWkqd7n7hdFZ%0AAGClWBkHgN70T5KuM7PrlD7X/6Ok342N1FKsJAHoCayMAwAAAEHYwAkAAAAEoRgHAAAAgmT2jE+d%0AWlP6HpbhI4me+uT5/E8EAAAAlpEkyZJjaTN7xg/dMVj6YryRNHRs+Ds5tK43TYzVtfOa6BQAAADd%0AablinGkqOcaOSXt2cajb7Ex0AgAAgN6TWYwPrWNF+PQZaeRodAoAAAD0IjZwAgAAAEEoxnP09/Hq%0A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%0AqLv7TLNVZ97MytamsuByd/91SXL3a8ysrCvCf650U/PPKV35eo+knwhNFONntOgVI6XtjaV5xWiB%0Amb1O0q/q7KslZX1V/bckPUfSxyQNSfobSaUrxrupdui0Q38+1fz93ZLetejXu8MSxXqApHsk/Zmk%0AMUlrld7pfjAyVICnu/sOSVV3f5/K2RsrSReY2Q+Y2QPMbE1zM1/ZfLl5s/7o5upwWdszEjN7uCSZ%0A2UMl9QfnifJdSv/deLS7v17lvQ6/Lempku6T9AeSfjY2TpifknSpu1/c/FXGQlySppu/f7u5ElzW%0AvxddUzt0VDHu7l9rvvkNST+tdFLCj0sq3bzUpke4+++6+y3ufoOkNe7+e0pnh5ZJv5k9QPqPl2Pr%0AwXmimNJe0LskefNXqbj7Hkl/Iun/SPord782OFKU10j6BzM7rHSiymuC80RZo3QV8JCZPV5pq0YZ%0A1Rdefnf3eUllfcXoq5JKNTlkGcOS/p+k95nZq5SeU1JGXVM7dFSbyiIfULr798NKR/t9UOW80/9u%0AM3ucu9/V7B1/UHM17EHRwVbZW5UWHP9F0u2SyjQl4T+4exk3ZN2PmW1z949K+oyZXWxmn3X350Tn%0ACvAQSRuUnjz5zTIdBnaOayU9T9LrJG1XWpiX0eJXjN6l8r5i9A1J95jZyeb7ibs/JjJQBHd/oZk9%0AyN2rzQ2cZT0crGtqh04txr/L3d/ZfPurzVPWyuhqSR82s4uV9oq/TOmu4NeFplpl7v5xM/uc0pNI%0AR3T/cY+lYWbPk/SbSv/e9kl6mLt/f2yqVbfDzE4pbeF6ndIpEmX0Ynf/sEp+Aqe7HzCzh0l6kaSv%0Aufvt0ZmCvEPpAXF3Snqh0kNfymir0laEf48OEsnMnirphWY2IKnPzC529zLupfiC0ul8l0kadfep%0A2DjL66hivPmkWpF03MyerfRCPlXpbN0yulzS90iaVTrA/73u/sTYSKvPzG5y96sl3W5mPyHpJqWr%0AgmXzWqUTI16i9O/GUGiaGP9TaY/wAyQ9w92/GZwnygVm9o9KW5UaKu8m97dLeoTSSQkvMbMfa7Yy%0Alc2fKr0xvVrpRs636D/PoS+DUUlnOnVixip6p6Q3Kt3YfIek8dg4YT6rtGXnjzu5EJc6rBhXOhd0%0Awe80f5XZbypt0/ldpVMDnhsbJ8y3zeyNSttzHq90l3gZnXD328zsN9z9/c3Z86VwzoSlGaVHnt9o%0A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"&gt;
&lt;/div&gt;

&lt;/div&gt;

&lt;/div&gt;
&lt;/div&gt;

&lt;/div&gt;
&lt;div class="cell border-box-sizing text_cell rendered"&gt;
&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;
&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;p&gt;Not half bad. The dataset is about the passengers on the Titanic. It's available from &lt;a href="https://www.kaggle.com/c/titanic-gettingStarted"&gt;Kaggle&lt;/a&gt;.&lt;/p&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing text_cell rendered"&gt;
&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;
&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;h4 id="Implementation"&gt;Implementation&lt;a class="anchor-link" href="http://tomaugspurger.github.io/posts/Visualizing%20Missing%20Data.html#Implementation"&gt;¶&lt;/a&gt;&lt;/h4&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing text_cell rendered"&gt;
&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;
&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;p&gt;Everything is done in a single function, which I've posted in a &lt;a href="https://gist.github.com/TomAugspurger/9156696"&gt;gist&lt;/a&gt;. &lt;em&gt;Note: I'm working on getting line numbers to show up in the blog. You may want to follow that link to the gist to see the line numbers I refer to below.&lt;/em&gt;&lt;/p&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing code_cell rendered"&gt;
&lt;div class="input"&gt;
&lt;div class="prompt input_prompt"&gt;In [3]:&lt;/div&gt;
&lt;div class="inner_cell"&gt;
    &lt;div class="input_area"&gt;
&lt;div class=" highlight hl-ipython3"&gt;&lt;pre&gt;&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;pandas&lt;/span&gt; &lt;span class="k"&gt;as&lt;/span&gt; &lt;span class="nn"&gt;pd&lt;/span&gt;

&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;numpy&lt;/span&gt; &lt;span class="k"&gt;as&lt;/span&gt; &lt;span class="nn"&gt;np&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;matplotlib.pyplot&lt;/span&gt; &lt;span class="k"&gt;as&lt;/span&gt; &lt;span class="nn"&gt;plt&lt;/span&gt;
&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;matplotlib&lt;/span&gt; &lt;span class="k"&gt;import&lt;/span&gt; &lt;span class="n"&gt;collections&lt;/span&gt; &lt;span class="k"&gt;as&lt;/span&gt; &lt;span class="n"&gt;collections&lt;/span&gt;
&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;matplotlib.patches&lt;/span&gt; &lt;span class="k"&gt;import&lt;/span&gt; &lt;span class="n"&gt;Rectangle&lt;/span&gt;
&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;itertools&lt;/span&gt; &lt;span class="k"&gt;import&lt;/span&gt; &lt;span class="n"&gt;izip&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;cycle&lt;/span&gt;


&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;missmap&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;df&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;ax&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="k"&gt;None&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;colors&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="k"&gt;None&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;aspect&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;sort&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;'descending'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
            &lt;span class="n"&gt;title&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="k"&gt;None&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="o"&gt;**&lt;/span&gt;&lt;span class="n"&gt;kwargs&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
    &lt;span class="sd"&gt;"""&lt;/span&gt;
&lt;span class="sd"&gt;    Plot the missing values of df.&lt;/span&gt;

&lt;span class="sd"&gt;    Parameters&lt;/span&gt;
&lt;span class="sd"&gt;    ----------&lt;/span&gt;
&lt;span class="sd"&gt;    df : pandas DataFrame&lt;/span&gt;
&lt;span class="sd"&gt;    ax : matplotlib axes&lt;/span&gt;
&lt;span class="sd"&gt;        if None then a new figure and axes will be created&lt;/span&gt;
&lt;span class="sd"&gt;    colors : dict&lt;/span&gt;
&lt;span class="sd"&gt;        dict with {True: c1, False: c2} where the values are&lt;/span&gt;
&lt;span class="sd"&gt;        matplotlib colors.&lt;/span&gt;
&lt;span class="sd"&gt;    aspect : int&lt;/span&gt;
&lt;span class="sd"&gt;        the width to height ratio for each rectangle.&lt;/span&gt;
&lt;span class="sd"&gt;    sort : one of {'descending', 'ascending', None}&lt;/span&gt;
&lt;span class="sd"&gt;    title : str&lt;/span&gt;
&lt;span class="sd"&gt;    kwargs : dict&lt;/span&gt;
&lt;span class="sd"&gt;        matplotlib.axes.bar kwargs&lt;/span&gt;

&lt;span class="sd"&gt;    Returns&lt;/span&gt;
&lt;span class="sd"&gt;    -------&lt;/span&gt;
&lt;span class="sd"&gt;    ax : matplotlib axes&lt;/span&gt;

&lt;span class="sd"&gt;    """&lt;/span&gt;
    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;ax&lt;/span&gt; &lt;span class="ow"&gt;is&lt;/span&gt; &lt;span class="k"&gt;None&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
        &lt;span class="n"&gt;fig&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;ax&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;plt&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;subplots&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;

    &lt;span class="c"&gt;# setup the axes&lt;/span&gt;
    &lt;span class="n"&gt;dfn&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;pd&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;isnull&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;df&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;sort&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;'ascending'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s"&gt;'descending'&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
        &lt;span class="n"&gt;counts&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;dfn&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;sum&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
        &lt;span class="n"&gt;sort_dict&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="s"&gt;'ascending'&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="k"&gt;True&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s"&gt;'descending'&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="k"&gt;False&lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;
        &lt;span class="n"&gt;counts&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;sort&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;ascending&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;sort_dict&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;sort&lt;/span&gt;&lt;span class="p"&gt;])&lt;/span&gt;
        &lt;span class="n"&gt;dfn&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;dfn&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;counts&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;index&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;

    &lt;span class="n"&gt;ny&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;len&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;df&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="n"&gt;nx&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;len&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;df&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;columns&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="c"&gt;# each column is a stacked bar made up of ny patches.&lt;/span&gt;
    &lt;span class="n"&gt;xgrid&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;np&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;tile&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;np&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;arange&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;len&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;df&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;columns&lt;/span&gt;&lt;span class="p"&gt;)),&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;ny&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;T&lt;/span&gt;
    &lt;span class="n"&gt;ygrid&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;np&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;tile&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;np&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;arange&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;ny&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;nx&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
    &lt;span class="c"&gt;# xys is the lower left corner of each patch&lt;/span&gt;
    &lt;span class="n"&gt;xys&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;zip&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;y&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;y&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;izip&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;xgrid&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;ygrid&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;

    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;colors&lt;/span&gt; &lt;span class="ow"&gt;is&lt;/span&gt; &lt;span class="k"&gt;None&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
        &lt;span class="n"&gt;colors&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="k"&gt;True&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s"&gt;'#EAF205'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="k"&gt;False&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s"&gt;'k'&lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;

    &lt;span class="n"&gt;widths&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;cycle&lt;/span&gt;&lt;span class="p"&gt;([&lt;/span&gt;&lt;span class="n"&gt;aspect&lt;/span&gt;&lt;span class="p"&gt;])&lt;/span&gt;
    &lt;span class="n"&gt;heights&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;cycle&lt;/span&gt;&lt;span class="p"&gt;([&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;])&lt;/span&gt;

    &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;xy&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;width&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;height&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;col&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;izip&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;xys&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;widths&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;heights&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;dfn&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;columns&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
        &lt;span class="n"&gt;color_array&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;dfn&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;col&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;map&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;colors&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

        &lt;span class="n"&gt;rects&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;Rectangle&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;xyc&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;width&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;height&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="o"&gt;**&lt;/span&gt;&lt;span class="n"&gt;kwargs&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
                 &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;xyc&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;c&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="nb"&gt;zip&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;xy&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;color_array&lt;/span&gt;&lt;span class="p"&gt;)]&lt;/span&gt;

        &lt;span class="n"&gt;p_coll&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;collections&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;PatchCollection&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;rects&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;color&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;color_array&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
                                             &lt;span class="n"&gt;edgecolor&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;color_array&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="o"&gt;**&lt;/span&gt;&lt;span class="n"&gt;kwargs&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
        &lt;span class="n"&gt;ax&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;add_collection&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;p_coll&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;autolim&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="k"&gt;False&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

    &lt;span class="c"&gt;# post plot aesthetics&lt;/span&gt;
    &lt;span class="n"&gt;ax&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;set_xlim&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;nx&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="n"&gt;ax&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;set_ylim&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;ny&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

    &lt;span class="n"&gt;ax&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;set_xticks&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;5&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;np&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;arange&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;nx&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;  &lt;span class="c"&gt;# center the ticks&lt;/span&gt;
    &lt;span class="n"&gt;ax&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;set_xticklabels&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;dfn&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;columns&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;t&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;ax&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;get_xticklabels&lt;/span&gt;&lt;span class="p"&gt;():&lt;/span&gt;
        &lt;span class="n"&gt;t&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;set_rotation&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;90&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

    &lt;span class="c"&gt;# remove tick lines&lt;/span&gt;
    &lt;span class="n"&gt;ax&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;tick_params&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;axis&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;'both'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;which&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;'both'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;bottom&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;'off'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;left&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;'off'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
                   &lt;span class="n"&gt;labelleft&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;'off'&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="n"&gt;ax&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;grid&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="k"&gt;False&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;title&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
        &lt;span class="n"&gt;ax&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;set_title&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;title&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;ax&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;/div&gt;
&lt;div class="cell border-box-sizing text_cell rendered"&gt;
&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;
&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;p&gt;I think my method is about the most straightforward way to do this. I represent each point in the DataFrame as a rectangle.
Every rectangle is the same size. They differ only in their color, which is determined by whether the value is valid or missing.&lt;/p&gt;
&lt;p&gt;My first implemenation used Matplotlib's &lt;code&gt;ax.bar()&lt;/code&gt; and simply stacked the points on top of eachother, similar to &lt;a href="http://matplotlib.org/examples/pylab_examples/bar_stacked.html"&gt;this example&lt;/a&gt;. However, matplotlib is a memory hog when plotting a lot of points or patches. Because my method means one patch per data point, the original implementation was slow.&lt;/p&gt;
&lt;p&gt;The solution was to use a &lt;a href="http://matplotlib.org/api/collections_api.html#module-matplotlib.collections"&gt;&lt;code&gt;Collection&lt;/code&gt;&lt;/a&gt;, which is designed for this task.&lt;/p&gt;
&lt;p&gt;Line 39 takes the original &lt;code&gt;DataFrame&lt;/code&gt; and returns a &lt;code&gt;DataFrame&lt;/code&gt; of &lt;code&gt;bool&lt;/code&gt;, &lt;code&gt;True&lt;/code&gt; wherever there is a &lt;code&gt;NaN&lt;/code&gt; in &lt;code&gt;df&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;The &lt;code&gt;if&lt;/code&gt; block starting on line 41 handles how the columns are sorted along the x-axis of the plot.&lt;/p&gt;
&lt;p&gt;The next section is some more setup. &lt;code&gt;matplotlib.patches.Rectangle&lt;/code&gt; expects 3 arguments:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;(x, y)&lt;/code&gt;: a tuple giving the lower-left corner of the rectangle&lt;/li&gt;
&lt;li&gt;width: a float giving the width&lt;/li&gt;
&lt;li&gt;height: a float giving the height&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;I create two 2-d arrays, &lt;code&gt;xgrid&lt;/code&gt; and &lt;code&gt;ygrid&lt;/code&gt;. Each of these is an &lt;code&gt;nx&lt;/code&gt; (# of columns) by &lt;code&gt;ny&lt;/code&gt; (# of rows) matrix.&lt;/p&gt;
&lt;p&gt;Here's what they look like:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;xgrid&lt;/span&gt;
&lt;span class="n"&gt;array&lt;/span&gt;&lt;span class="p"&gt;([[&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;  &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;  &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="o"&gt;...&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;  &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;  &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;  &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;],&lt;/span&gt;
       &lt;span class="p"&gt;[&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;  &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;  &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="o"&gt;...&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;  &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;  &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;  &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;],&lt;/span&gt;
       &lt;span class="p"&gt;[&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;  &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;  &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="o"&gt;...&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;  &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;  &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;  &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;],&lt;/span&gt;
       &lt;span class="o"&gt;...&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; 
       &lt;span class="p"&gt;[&lt;/span&gt; &lt;span class="mi"&gt;8&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;  &lt;span class="mi"&gt;8&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;  &lt;span class="mi"&gt;8&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="o"&gt;...&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;  &lt;span class="mi"&gt;8&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;  &lt;span class="mi"&gt;8&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;  &lt;span class="mi"&gt;8&lt;/span&gt;&lt;span class="p"&gt;],&lt;/span&gt;
       &lt;span class="p"&gt;[&lt;/span&gt; &lt;span class="mi"&gt;9&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;  &lt;span class="mi"&gt;9&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;  &lt;span class="mi"&gt;9&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="o"&gt;...&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;  &lt;span class="mi"&gt;9&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;  &lt;span class="mi"&gt;9&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;  &lt;span class="mi"&gt;9&lt;/span&gt;&lt;span class="p"&gt;],&lt;/span&gt;
       &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;10&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;10&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;10&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="o"&gt;...&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;10&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;10&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;10&lt;/span&gt;&lt;span class="p"&gt;]])&lt;/span&gt;

&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;ygrid&lt;/span&gt;
&lt;span class="n"&gt;array&lt;/span&gt;&lt;span class="p"&gt;([[&lt;/span&gt;  &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;   &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;   &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="o"&gt;...&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;415&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;416&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;417&lt;/span&gt;&lt;span class="p"&gt;],&lt;/span&gt;
   &lt;span class="p"&gt;[&lt;/span&gt;  &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;   &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;   &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="o"&gt;...&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;415&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;416&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;417&lt;/span&gt;&lt;span class="p"&gt;],&lt;/span&gt;
   &lt;span class="p"&gt;[&lt;/span&gt;  &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;   &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;   &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="o"&gt;...&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;415&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;416&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;417&lt;/span&gt;&lt;span class="p"&gt;],&lt;/span&gt;
   &lt;span class="o"&gt;...&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; 
   &lt;span class="p"&gt;[&lt;/span&gt;  &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;   &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;   &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="o"&gt;...&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;415&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;416&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;417&lt;/span&gt;&lt;span class="p"&gt;],&lt;/span&gt;
   &lt;span class="p"&gt;[&lt;/span&gt;  &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;   &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;   &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="o"&gt;...&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;415&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;416&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;417&lt;/span&gt;&lt;span class="p"&gt;],&lt;/span&gt;
   &lt;span class="p"&gt;[&lt;/span&gt;  &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;   &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;   &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="o"&gt;...&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;415&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;416&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;417&lt;/span&gt;&lt;span class="p"&gt;]])&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;We'll zip the two together to get the &lt;code&gt;(x, y)&lt;/code&gt; needed for the lower-left corner of each rectangle. So the first point gets
&lt;code&gt;(xgrid[0][0], ygrid[0][0])&lt;/code&gt;, which is &lt;code&gt;(0, 0)&lt;/code&gt;. Every point in the same column has the same &lt;code&gt;x&lt;/code&gt; coordinate, and each point's &lt;code&gt;y&lt;/code&gt; coordinate is bumped up by one.&lt;/p&gt;
&lt;p&gt;Line 53:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="n"&gt;xys&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;zip&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;y&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;y&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;izip&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;xgrid&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;ygrid&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;returns a generator who's elements are the lower left coordinates for each point. I do it lazily with &lt;code&gt;izip&lt;/code&gt; from the &lt;code&gt;itertools&lt;/code&gt; module, since we don't need the entire list of tuples at once.&lt;/p&gt;
&lt;p&gt;The user can specify what colors to use for True and False, and the aspect ratio.
Initially I was going to create an &lt;code&gt;nx&lt;/code&gt; by &lt;code&gt;ny&lt;/code&gt; matrix of widths and heights. But, since every rectangle will be the same shape, I realized that would be wasteful. We can just make a generator that always returns the same number using &lt;code&gt;itertools.cycle&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;Line 61 is where the action occurs. We iterate over 4 iterables, the lower left coordinates, the widths, the heights, and the columns of the &lt;code&gt;DataFrame&lt;/code&gt;. For each column in &lt;code&gt;df&lt;/code&gt;, we create an array of colors, based on which values are &lt;code&gt;NaN&lt;/code&gt;s.&lt;/p&gt;
&lt;p&gt;Line 64 makes a list of &lt;code&gt;Rectangels&lt;/code&gt; for that column of &lt;code&gt;df&lt;/code&gt; using a list comprehension. Notice that I don't specify the color of each rectangle here. That's what I did at first, but those colors get overridden by line 67, when you create the &lt;code&gt;PatchCollection&lt;/code&gt;. That is apparently the correct place to specify the color of each rectangle. The &lt;code&gt;PatchCollection&lt;/code&gt; is added to the &lt;code&gt;axes&lt;/code&gt;, &lt;code&gt;ax&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;The rest is purely aesthetic stuff: getting the x-labels from the columns of &lt;code&gt;df&lt;/code&gt;, centering and rotating them, removing the labels and ticks from the y axis, and setting a title.&lt;/p&gt;
&lt;p&gt;Overall I was pleased with how it turned out. Let me know if you have any suggestions for improvement!&lt;/p&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="cell border-box-sizing code_cell rendered"&gt;
&lt;div class="input"&gt;
&lt;div class="prompt input_prompt"&gt;In [ ]:&lt;/div&gt;
&lt;div class="inner_cell"&gt;
    &lt;div class="input_area"&gt;
&lt;div class=" highlight hl-ipython3"&gt;&lt;pre&gt; 
&lt;/pre&gt;&lt;/div&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;/div&gt;
    &lt;/div&gt;
  &lt;/div&gt;
</description><category>data science</category><category>python</category><category>scripts</category><category>visualization</category><guid>http://tomaugspurger.github.io/posts/Visualizing Missing Data.html</guid><pubDate>Sat, 22 Feb 2014 18:00:00 GMT</pubDate></item><item><title>Organizing Papers</title><link>http://tomaugspurger.github.io/posts/Organizing Papers.html</link><dc:creator>Tom Augspurger</dc:creator><description>&lt;div&gt;&lt;p&gt;As a graduate student, you read a lot of journal articles... &lt;em&gt;a lot&lt;/em&gt;.
With the material in the articles being as difficult as it is, I didn't want to worry about organizing everything as well.
That's why I wrote &lt;a href="https://gist.github.com/TomAugspurger/8976751"&gt;this script&lt;/a&gt; to help (I may have also been procrastinating from studying for my qualifiers). This was one of my earliest little projects, so I'm not claiming that this is the best way to do anything.&lt;/p&gt;
&lt;p&gt;My goal was to have a central repository of papers that was organized by an author's last name. Under each author's name would go all of their papers I had read or planned to read.
I needed it to be portable so that I could access any paper from my computer or iPad, so Dropbox was a necessity. I also needed to organize the papers by subject. I wanted to easily get to all the papers on Asset Pricing, without having to go through each of the authors separately.
&lt;a href="http://en.wikipedia.org/wiki/Symbolic_link"&gt;Symbolic links&lt;/a&gt; were a natural solution to my problem.
A canonical copy of each paper would be stored under &lt;code&gt;/Drobox/Papers/&amp;lt;author name&amp;gt;&lt;/code&gt;, and I could refer that paper from &lt;code&gt;/Macro/Asset Pricing/&lt;/code&gt; with a symbolic link. Symbolic links avoid the problem of having multiple copies of the same paper. Any highlighting or notes I make on a paper is automatically spread to anywhere that paper is linked from.&lt;/p&gt;
&lt;pre class="code literal-block"&gt;&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;os&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;re&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;sys&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;subprocess&lt;/span&gt;

&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;pathlib&lt;/span&gt;


&lt;span class="k"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;Parser&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;object&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
    &lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;__init__&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;path&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
                 &lt;span class="n"&gt;repo&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;pathlib&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;PosixPath&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;'/Users/tom/Economics/Papers'&lt;/span&gt;&lt;span class="p"&gt;)):&lt;/span&gt;
        &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;repo&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;repo&lt;/span&gt;
        &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;path&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;path_parse&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;path&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
        &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;exists&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;check_existance&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;path&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
        &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;is_full&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;check_full&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;path&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
        &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;check_type&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;path&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
        &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;added&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;[]&lt;/span&gt;

    &lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;path_parse&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;path&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
        &lt;span class="sd"&gt;"""Ensures a common point of entry to the functions.&lt;/span&gt;
&lt;span class="sd"&gt;        Returns a pathlib.PosixPath object&lt;/span&gt;
&lt;span class="sd"&gt;        """&lt;/span&gt;
        &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="ow"&gt;not&lt;/span&gt; &lt;span class="nb"&gt;isinstance&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;path&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;pathlib&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;PosixPath&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
            &lt;span class="n"&gt;path&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;pathlib&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;PosixPath&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;path&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
            &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;path&lt;/span&gt;
        &lt;span class="k"&gt;else&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
            &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;path&lt;/span&gt;

    &lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;check_existance&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;path&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
        &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="ow"&gt;not&lt;/span&gt; &lt;span class="n"&gt;path&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;exists&lt;/span&gt;&lt;span class="p"&gt;():&lt;/span&gt;
            &lt;span class="k"&gt;raise&lt;/span&gt; &lt;span class="ne"&gt;OSError&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;'The supplied path does not exist.'&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
        &lt;span class="k"&gt;else&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
            &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="bp"&gt;True&lt;/span&gt;

    &lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;check_type&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;path&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
        &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;path&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;is_dir&lt;/span&gt;&lt;span class="p"&gt;():&lt;/span&gt;
            &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;is_dir&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="bp"&gt;True&lt;/span&gt;
            &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;is_file&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="bp"&gt;False&lt;/span&gt;
        &lt;span class="k"&gt;else&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
            &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;is_file&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="bp"&gt;True&lt;/span&gt;
            &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;is_dir&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="bp"&gt;False&lt;/span&gt;

    &lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;check_full&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;path&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
        &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;path&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;parent&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;as_posix&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;path&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;as_posix&lt;/span&gt;&lt;span class="p"&gt;():&lt;/span&gt;
            &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="bp"&gt;True&lt;/span&gt;

    &lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;parser&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;f&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
        &lt;span class="sd"&gt;"""The parsing logic to find authors and paper name from a file.&lt;/span&gt;
&lt;span class="sd"&gt;        f is a full path.&lt;/span&gt;
&lt;span class="sd"&gt;        """&lt;/span&gt;
        &lt;span class="k"&gt;try&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
            &lt;span class="n"&gt;file_name&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;f&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;parts&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
            &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;file_name&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;file_name&lt;/span&gt;
            &lt;span class="n"&gt;r&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;re&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;compile&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;r' \([\d-]{0,4}\)'&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
            &lt;span class="n"&gt;sep_authors&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;re&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;compile&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;r' &amp;amp; |, | and'&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

            &lt;span class="n"&gt;all_authors&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;paper&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;re&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;split&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;r&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;file_name&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
            &lt;span class="n"&gt;paper&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;paper&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;lstrip&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;' - '&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
            &lt;span class="n"&gt;authors&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;re&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;split&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;sep_authors&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;all_authors&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
            &lt;span class="n"&gt;authors&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;author&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;strip&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;'&amp;amp; '&lt;/span&gt; &lt;span class="ow"&gt;or&lt;/span&gt; &lt;span class="s"&gt;'and '&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;author&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;authors&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
            &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;authors&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;paper&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;authors&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;paper&lt;/span&gt;
            &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;authors&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;paper&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
        &lt;span class="k"&gt;except&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
            &lt;span class="k"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;'Missed on {}'&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;format&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;file_name&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;

    &lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;make_dir&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;authors&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
        &lt;span class="n"&gt;repo&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;repo&lt;/span&gt;
        &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;author&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;authors&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
            &lt;span class="k"&gt;try&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
                &lt;span class="n"&gt;os&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;mkdir&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;repo&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;author&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;as_posix&lt;/span&gt;&lt;span class="p"&gt;())&lt;/span&gt;
            &lt;span class="k"&gt;except&lt;/span&gt; &lt;span class="ne"&gt;OSError&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
                &lt;span class="k"&gt;pass&lt;/span&gt;

    &lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;copy_and_link&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;authors&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;f&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;replace&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="bp"&gt;True&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
        &lt;span class="n"&gt;repo&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;repo&lt;/span&gt;
        &lt;span class="n"&gt;file_name&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;f&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;parts&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
        &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;author&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;authors&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
            &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;author&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="n"&gt;authors&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;]:&lt;/span&gt;
                &lt;span class="k"&gt;try&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
                    &lt;span class="n"&gt;subprocess&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;call&lt;/span&gt;&lt;span class="p"&gt;([&lt;/span&gt;&lt;span class="s"&gt;"cp"&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;f&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;as_posix&lt;/span&gt;&lt;span class="p"&gt;(),&lt;/span&gt;
                                    &lt;span class="n"&gt;repo&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;author&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;as_posix&lt;/span&gt;&lt;span class="p"&gt;()])&lt;/span&gt;
                    &lt;span class="n"&gt;success&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="bp"&gt;True&lt;/span&gt;
                &lt;span class="k"&gt;except&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
                    &lt;span class="n"&gt;success&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="bp"&gt;False&lt;/span&gt;
            &lt;span class="k"&gt;else&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
                &lt;span class="n"&gt;subprocess&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;call&lt;/span&gt;&lt;span class="p"&gt;([&lt;/span&gt;&lt;span class="s"&gt;"ln"&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s"&gt;"-s"&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
                                &lt;span class="n"&gt;repo&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;authors&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;]][&lt;/span&gt;&lt;span class="n"&gt;file_name&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;as_posix&lt;/span&gt;&lt;span class="p"&gt;(),&lt;/span&gt;
                                &lt;span class="n"&gt;repo&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;author&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;as_posix&lt;/span&gt;&lt;span class="p"&gt;()])&lt;/span&gt;
                &lt;span class="n"&gt;success&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="bp"&gt;True&lt;/span&gt;
            &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;replace&lt;/span&gt; &lt;span class="ow"&gt;and&lt;/span&gt; &lt;span class="n"&gt;author&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="n"&gt;authors&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="ow"&gt;and&lt;/span&gt; &lt;span class="n"&gt;success&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
                &lt;span class="k"&gt;try&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
                    &lt;span class="n"&gt;f&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;unlink&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
                    &lt;span class="n"&gt;subprocess&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;call&lt;/span&gt;&lt;span class="p"&gt;([&lt;/span&gt;&lt;span class="s"&gt;"ln"&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s"&gt;"-s"&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
                                    &lt;span class="n"&gt;repo&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;authors&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;]][&lt;/span&gt;&lt;span class="n"&gt;file_name&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;as_posix&lt;/span&gt;&lt;span class="p"&gt;(),&lt;/span&gt;
                                    &lt;span class="n"&gt;f&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;parts&lt;/span&gt;&lt;span class="p"&gt;[:&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;as_posix&lt;/span&gt;&lt;span class="p"&gt;()])&lt;/span&gt;
                &lt;span class="k"&gt;except&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
                    &lt;span class="k"&gt;raise&lt;/span&gt; &lt;span class="ne"&gt;OSError&lt;/span&gt;

    &lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;main&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;f&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
        &lt;span class="n"&gt;authors&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;paper&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;parser&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;f&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
        &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;make_dir&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;authors&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
        &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;copy_and_link&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;authors&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;f&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

    &lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;run&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
        &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;exists&lt;/span&gt; &lt;span class="ow"&gt;and&lt;/span&gt; &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;is_full&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
            &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;is_dir&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
                &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;f&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;path&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
                    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;f&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;parts&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;][&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="s"&gt;'.'&lt;/span&gt; &lt;span class="ow"&gt;or&lt;/span&gt; &lt;span class="n"&gt;f&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;is_symlink&lt;/span&gt;&lt;span class="p"&gt;():&lt;/span&gt;
                        &lt;span class="k"&gt;pass&lt;/span&gt;
                    &lt;span class="k"&gt;else&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
                        &lt;span class="k"&gt;try&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
                            &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;main&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;f&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
                            &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;added&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;append&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;f&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
                        &lt;span class="k"&gt;except&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
                            &lt;span class="k"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;'Failed on &lt;/span&gt;&lt;span class="si"&gt;%s&lt;/span&gt;&lt;span class="s"&gt;'&lt;/span&gt; &lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="nb"&gt;str&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;f&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
            &lt;span class="k"&gt;else&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
                &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;main&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;path&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
                &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;added&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;append&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;path&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
            &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;item&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;added&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
                &lt;span class="k"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;item&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;parts&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;])&lt;/span&gt;

&lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;__name__&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="s"&gt;"__main__"&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
    &lt;span class="n"&gt;p&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;pathlib&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;PosixPath&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;sys&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;argv&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;])&lt;/span&gt;
    &lt;span class="k"&gt;try&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
        &lt;span class="n"&gt;repo&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;pathlib&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;PosixPath&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;sys&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;argv&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;])&lt;/span&gt;
    &lt;span class="k"&gt;except&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
        &lt;span class="n"&gt;repo&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;pathlib&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;PosixPath&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;'/Users/tom/Economics/Papers'&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="k"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;p&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="n"&gt;obj&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;Parser&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;p&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;repo&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="n"&gt;obj&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;run&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;/pre&gt;


&lt;p&gt;The script takes two arguments, the folder to work on and the folder to store the results (defaults to &lt;code&gt;/Users/tom/Economics/Papers&lt;/code&gt;). Already a could things jump out that I should update. If I ever wanted to add more sophisticated command line arguments I would want to switch to something like &lt;a href="http://docs.python.org/dev/library/argparse.html"&gt;&lt;code&gt;argparse&lt;/code&gt;&lt;/a&gt;. I also shouldn't have something like &lt;code&gt;/Users/tom&lt;/code&gt; anywhere. This kills portability since it's specific to my computer (use &lt;code&gt;os.path.expanduser('~')&lt;/code&gt; instead).&lt;/p&gt;
&lt;p&gt;I create a &lt;code&gt;Parser&lt;/code&gt; which finds every paper in the directory given by the first argument. I had to settle on a standard naming for my papers. I chose &lt;code&gt;Author1, Author2, ... and AuthorN (YYYY) - Paper Title&lt;/code&gt;. Whenever &lt;code&gt;Parser&lt;/code&gt; find that pattern, it splits off the Authors from the title of the paper, and stores the location of the file.&lt;/p&gt;
&lt;p&gt;After doing this for each paper in the directory, it's time to copy and link the files.&lt;/p&gt;
&lt;pre class="code literal-block"&gt;&lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;author&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;authors&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;author&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="n"&gt;authors&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;]:&lt;/span&gt;
        &lt;span class="k"&gt;try&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
            &lt;span class="n"&gt;subprocess&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;call&lt;/span&gt;&lt;span class="p"&gt;([&lt;/span&gt;&lt;span class="s"&gt;"cp"&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;f&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;as_posix&lt;/span&gt;&lt;span class="p"&gt;(),&lt;/span&gt;
                            &lt;span class="n"&gt;repo&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;author&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;as_posix&lt;/span&gt;&lt;span class="p"&gt;()])&lt;/span&gt;
            &lt;span class="n"&gt;success&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="bp"&gt;True&lt;/span&gt;
        &lt;span class="k"&gt;except&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
            &lt;span class="n"&gt;success&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="bp"&gt;False&lt;/span&gt;
    &lt;span class="k"&gt;else&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
        &lt;span class="n"&gt;subprocess&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;call&lt;/span&gt;&lt;span class="p"&gt;([&lt;/span&gt;&lt;span class="s"&gt;"ln"&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s"&gt;"-s"&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
                        &lt;span class="n"&gt;repo&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;authors&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;]][&lt;/span&gt;&lt;span class="n"&gt;file_name&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;as_posix&lt;/span&gt;&lt;span class="p"&gt;(),&lt;/span&gt;
                        &lt;span class="n"&gt;repo&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;author&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;as_posix&lt;/span&gt;&lt;span class="p"&gt;()])&lt;/span&gt;
        &lt;span class="n"&gt;success&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="bp"&gt;True&lt;/span&gt;
&lt;/pre&gt;


&lt;p&gt;Since I just one one actual copy of the paper on file, I only copy the paper to the first author's sub-folder. Thats the &lt;code&gt;if author == authors[0]&lt;/code&gt;. Every other author just links to the copy stored in the first author's folder. The wiser me of today would use something like &lt;a href="http://docs.python.org/2/library/shutil.html"&gt;&lt;code&gt;shutil&lt;/code&gt;&lt;/a&gt; to copy the files instead of &lt;code&gt;subprocess&lt;/code&gt;, but I was still new to python.&lt;/p&gt;
&lt;iframe src="https://www.flickr.com/photos/81581328@N02/12501636805/player/3eb021f38a" height="509" width="800" frameborder="0" allowfullscreen webkitallowfullscreen mozallowfullscreen oallowfullscreen msallowfullscreen&gt;&lt;/iframe&gt;

&lt;p&gt;The biggest drawback is that I can't differentiate multiple authors with the same last name that well. I need to edit the original names to include the first initials (&lt;code&gt;C. Romer and D. Romer (2010)&lt;/code&gt;). But overall I'm pleased with the results.&lt;/p&gt;&lt;/div&gt;</description><category>python</category><category>scripts</category><guid>http://tomaugspurger.github.io/posts/Organizing Papers.html</guid><pubDate>Thu, 13 Feb 2014 18:00:00 GMT</pubDate></item></channel></rss>