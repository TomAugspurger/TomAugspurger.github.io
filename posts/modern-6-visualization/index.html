<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Modern Pandas (Part 6): Visualization | Tom's Blog</title><meta name=keywords content="pandas"><meta name=description content="This is part 6 in my series on writing modern idiomatic pandas.
Modern Pandas Method Chaining Indexes Fast Pandas Tidy Data Visualization Time Series Scaling Visualization and Exploratory Analysis A few weeks ago, the R community went through some hand-wringing about plotting packages. For outsiders (like me) the details aren&rsquo;t that important, but some brief background might be useful so we can transfer the takeaways to Python. The competing systems are &ldquo;base R&rdquo;, which is the plotting system built into the language, and ggplot2, Hadley Wickham&rsquo;s implementation of the grammar of graphics."><meta name=author content><link rel=canonical href=https://tomaugspurger.github.io/posts/modern-6-visualization/><link crossorigin=anonymous href=/assets/css/stylesheet.3690c96d8a707265a16abd3b389bb33e4e3916869c3142cba43a3cfaaed4b5f9.css integrity="sha256-NpDJbYpwcmWhar07OJuzPk45FoacMULLpDo8+q7Utfk=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG+9vmJ0cTS+ovo0FeA=" onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://tomaugspurger.github.io/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://tomaugspurger.github.io/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://tomaugspurger.github.io/favicon-32x32.png><link rel=apple-touch-icon href=https://tomaugspurger.github.io/apple-touch-icon.png><link rel=mask-icon href=https://tomaugspurger.github.io/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:title" content="Modern Pandas (Part 6): Visualization"><meta property="og:description" content="This is part 6 in my series on writing modern idiomatic pandas.
Modern Pandas Method Chaining Indexes Fast Pandas Tidy Data Visualization Time Series Scaling Visualization and Exploratory Analysis A few weeks ago, the R community went through some hand-wringing about plotting packages. For outsiders (like me) the details aren&rsquo;t that important, but some brief background might be useful so we can transfer the takeaways to Python. The competing systems are &ldquo;base R&rdquo;, which is the plotting system built into the language, and ggplot2, Hadley Wickham&rsquo;s implementation of the grammar of graphics."><meta property="og:type" content="article"><meta property="og:url" content="https://tomaugspurger.github.io/posts/modern-6-visualization/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2016-04-28T00:00:00+00:00"><meta property="article:modified_time" content="2016-04-28T00:00:00+00:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="Modern Pandas (Part 6): Visualization"><meta name=twitter:description content="This is part 6 in my series on writing modern idiomatic pandas.
Modern Pandas Method Chaining Indexes Fast Pandas Tidy Data Visualization Time Series Scaling Visualization and Exploratory Analysis A few weeks ago, the R community went through some hand-wringing about plotting packages. For outsiders (like me) the details aren&rsquo;t that important, but some brief background might be useful so we can transfer the takeaways to Python. The competing systems are &ldquo;base R&rdquo;, which is the plotting system built into the language, and ggplot2, Hadley Wickham&rsquo;s implementation of the grammar of graphics."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":2,"name":"Posts","item":"https://tomaugspurger.github.io/posts/"},{"@type":"ListItem","position":3,"name":"Modern Pandas (Part 6): Visualization","item":"https://tomaugspurger.github.io/posts/modern-6-visualization/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Modern Pandas (Part 6): Visualization","name":"Modern Pandas (Part 6): Visualization","description":"This is part 6 in my series on writing modern idiomatic pandas.\nModern Pandas Method Chaining Indexes Fast Pandas Tidy Data Visualization Time Series Scaling Visualization and Exploratory Analysis A few weeks ago, the R community went through some hand-wringing about plotting packages. For outsiders (like me) the details aren\u0026rsquo;t that important, but some brief background might be useful so we can transfer the takeaways to Python. The competing systems are \u0026ldquo;base R\u0026rdquo;, which is the plotting system built into the language, and ggplot2, Hadley Wickham\u0026rsquo;s implementation of the grammar of graphics.","keywords":["pandas"],"articleBody":" This is part 6 in my series on writing modern idiomatic pandas.\nModern Pandas Method Chaining Indexes Fast Pandas Tidy Data Visualization Time Series Scaling Visualization and Exploratory Analysis A few weeks ago, the R community went through some hand-wringing about plotting packages. For outsiders (like me) the details aren’t that important, but some brief background might be useful so we can transfer the takeaways to Python. The competing systems are “base R”, which is the plotting system built into the language, and ggplot2, Hadley Wickham’s implementation of the grammar of graphics. For those interested in more details, start with\nWhy I Don’t Use ggplot2 Why I use ggplot2 Comparing ggplot2 and base r graphics The most important takeaways are that\nEither system is capable of producing anything the other can ggplot2 is usually better for exploratory analysis Item 2 is not universally agreed upon, and it certainly isn’t true for every type of chart, but we’ll take it as fact for now. I’m not foolish enough to attempt a formal analogy here, like “matplotlib is python’s base R”. But there’s at least a rough comparison: like dplyr/tidyr and ggplot2, the combination of pandas and seaborn allows for fast iteration and exploration. When you need to, you can “drop down” into matplotlib for further refinement.\nOverview Here’s a brief sketch of the plotting landscape as of April 2016. For some reason, plotting tools feel a bit more personal than other parts of this series so far, so I feel the need to blanket this who discussion in a caveat: this is my personal take, shaped by my personal background and tastes. Also, I’m not at all an expert on visualization, just a consumer. For real advice, you should listen to the experts in this area. Take this all with an extra grain or two of salt.\nMatplotlib Matplotlib is an amazing project, and is the foundation of pandas’ built-in plotting and Seaborn. It handles everything from the integration with various drawing backends, to several APIs handling drawing charts or adding and transforming individual glyphs (artists). I’ve found knowing the pyplot API useful. You’re less likely to need things like Transforms or artists, but when you do the documentation is there.\nMatplotlib has built up something of a bad reputation for being verbose. I think that complaint is valid, but misplaced. Matplotlib lets you control essentially anything on the figure. An overly-verbose API just means there’s an opportunity for a higher-level, domain specific, package to exist (like seaborn for statistical graphics).\nPandas’ builtin-plotting DataFrame and Series have a .plot namespace, with various chart types available (line, hist, scatter, etc.). Pandas objects provide additional metadata that can be used to enhance plots (the Index for a better automatic x-axis then range(n) or Index names as axis labels for example).\nAnd since pandas had fewer backwards-compatibility constraints, it had a bit better default aesthetics. The matplotlib 2.0 release will level this, and pandas has deprecated its custom plotting styles, in favor of matplotlib’s (technically I just broke it when fixing matplotlib 1.5 compatibility, so we deprecated it after the fact).\nAt this point, I see pandas DataFrame.plot as a useful exploratory tool for quick throwaway plots.\nSeaborn Seaborn, created by Michael Waskom, “provides a high-level interface for drawing attractive statistical graphics.” Seaborn gives a great API for quickly exploring different visual representations of your data. We’ll be focusing on that today\nBokeh Bokeh is a (still under heavy development) visualiztion library that targets the browser.\nLike matplotlib, Bokeh has a few APIs at various levels of abstraction. They have a glyph API, which I suppose is most similar to matplotlib’s Artists API, for drawing single or arrays of glpyhs (circles, rectangles, polygons, etc.). More recently they introduced a Charts API, for producing canned charts from data structures like dicts or DataFrames.\nOther Libraries This is a (probably incomplete) list of other visualization libraries that I don’t know enough about to comment on\nAltair Lightning HoloViews Glueviz vispy bqplot Plotly It’s also possible to use Javascript tools like D3 directly in the Jupyter notebook, but we won’t go into those today.\nExamples I do want to pause and explain the type of work I’m doing with these packages. The vast majority of plots I create are for exploratory analysis, helping me understand the dataset I’m working with. They aren’t intended for the client (whoever that is) to see. Occasionally that exploratory plot will evolve towards a final product that will be used to explain things to the client. In this case I’ll either polish the exploratory plot, or rewrite it in another system more suitable for the final product (in D3 or Bokeh, say, if it needs to be an interactive document in the browser).\nNow that we have a feel for the overall landscape (from my point of view), let’s delve into a few examples. We’ll use the diamonds dataset from ggplot2. You could use Vincent Arelbundock’s RDatasets package to find it (pd.read_csv('http://vincentarelbundock.github.io/Rdatasets/csv/ggplot2/diamonds.csv')), but I wanted to checkout feather.\nimport os import feather import numpy as np import pandas as pd import matplotlib.pyplot as plt import seaborn as sns if int(os.environ.get(\"MODERN_PANDAS_EPUB\", 0)): import prep # noqa %load_ext rpy2.ipython %%R suppressPackageStartupMessages(library(ggplot2)) library(feather) write_feather(diamonds, 'diamonds.fthr') import feather df = feather.read_dataframe('diamonds.fthr') df.head() carat cut color clarity depth table price x y z 0 0.23 Ideal E SI2 61.5 55.0 326 3.95 3.98 2.43 1 0.21 Premium E SI1 59.8 61.0 326 3.89 3.84 2.31 2 0.23 Good E VS1 56.9 65.0 327 4.05 4.07 2.31 3 0.29 Premium I VS2 62.4 58.0 334 4.20 4.23 2.63 4 0.31 Good J SI2 63.3 58.0 335 4.34 4.35 2.75 df.info() ","wordCount":"2105","inLanguage":"en","datePublished":"2016-04-28T00:00:00Z","dateModified":"2016-04-28T00:00:00Z","mainEntityOfPage":{"@type":"WebPage","@id":"https://tomaugspurger.github.io/posts/modern-6-visualization/"},"publisher":{"@type":"Organization","name":"Tom's Blog","logo":{"@type":"ImageObject","url":"https://tomaugspurger.github.io/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://tomaugspurger.github.io accesskey=h title="Tom's Blog (Alt + H)">Tom's Blog</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://tomaugspurger.github.io/about/ title=About><span>About</span></a></li><li><a href=https://tomaugspurger.github.io/archives title=Archive><span>Archive</span></a></li><li><a href=https://tomaugspurger.github.io/index.xml title=RSS><span>RSS</span></a></li><li><a href=https://tomaugspurger.github.io/tags title=Tags><span>Tags</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class=post-title>Modern Pandas (Part 6): Visualization</h1><div class=post-meta><span title='2016-04-28 00:00:00 +0000 UTC'>April 28, 2016</span></div></header><div class=post-content><hr><p>This is part 6 in my series on writing modern idiomatic pandas.</p><ul><li><a href=modern-1-intro>Modern Pandas</a></li><li><a href=method-chaining>Method Chaining</a></li><li><a href=modern-3-indexes>Indexes</a></li><li><a href=modern-4-performance>Fast Pandas</a></li><li><a href=modern-5-tidy>Tidy Data</a></li><li><a href=modern-6-visualization>Visualization</a></li><li><a href=modern-7-timeseries>Time Series</a></li><li><a href=modern-8-scaling>Scaling</a></li></ul><hr><h1 id=visualization-and-exploratory-analysis>Visualization and Exploratory Analysis<a hidden class=anchor aria-hidden=true href=#visualization-and-exploratory-analysis>#</a></h1><p>A few weeks ago, the R community went through some hand-wringing about plotting packages.
For outsiders (like me) the details aren&rsquo;t that important, but some brief background might be useful so we can transfer the takeaways to Python.
The competing systems are &ldquo;base R&rdquo;, which is the plotting system built into the language, and ggplot2, Hadley Wickham&rsquo;s implementation of the grammar of graphics.
For those interested in more details, start with</p><ul><li><a href=http://simplystatistics.org/2016/02/11/why-i-dont-use-ggplot2/>Why I Don&rsquo;t Use ggplot2</a></li><li><a href=http://varianceexplained.org/r/why-I-use-ggplot2/>Why I use ggplot2</a></li><li><a href=http://flowingdata.com/2016/03/22/comparing-ggplot2-and-r-base-graphics/>Comparing ggplot2 and base r graphics</a></li></ul><p>The most important takeaways are that</p><ol><li>Either system is capable of producing anything the other can</li><li>ggplot2 is usually better for exploratory analysis</li></ol><p>Item 2 is not universally agreed upon, and it certainly isn&rsquo;t true for every type of chart, but we&rsquo;ll take it as fact for now.
I&rsquo;m not foolish enough to attempt a formal analogy here, like &ldquo;matplotlib is python&rsquo;s base R&rdquo;.
But there&rsquo;s at least a rough comparison:
like dplyr/tidyr and ggplot2, the combination of pandas and seaborn allows for fast iteration and exploration.
When you need to, you can &ldquo;drop down&rdquo; into matplotlib for further refinement.</p><h2 id=overview>Overview<a hidden class=anchor aria-hidden=true href=#overview>#</a></h2><p>Here&rsquo;s a brief sketch of the plotting landscape as of April 2016.
For some reason, plotting tools feel a bit more personal than other parts of this series so far, so I feel the need to blanket this who discussion in a caveat: this is my personal take, shaped by my personal background and tastes.
Also, I&rsquo;m not at all an expert on visualization, just a consumer.
For real advice, you should <a href=http://twitter.com/mbostock>listen</a> to the <a href=https://twitter.com/oceankidbilly>experts</a> in this <a href=https://twitter.com/arnicas>area</a>.
Take this all with an extra grain or two of salt.</p><h2 id=matplotlibhttpmatplotliborg><a href=http://matplotlib.org/>Matplotlib</a><a hidden class=anchor aria-hidden=true href=#matplotlibhttpmatplotliborg>#</a></h2><p>Matplotlib is an amazing project, and is the foundation of pandas&rsquo; built-in plotting and Seaborn.
It handles everything from the integration with various drawing backends, to several APIs handling drawing charts or adding and transforming individual glyphs (artists).
I&rsquo;ve found knowing the <a href=http://matplotlib.org/api/pyplot_api.html>pyplot API</a> useful.
You&rsquo;re less likely to need things like <a href=http://matplotlib.org/users/transforms_tutorial.html>Transforms</a> or <a href=http://matplotlib.org/api/artist_api.html>artists</a>, but when you do the documentation is there.</p><p>Matplotlib has built up something of a bad reputation for being verbose.
I think that complaint is valid, but misplaced.
Matplotlib lets you control essentially anything on the figure.
An overly-verbose API just means there&rsquo;s an opportunity for a higher-level, domain specific, package to exist (like seaborn for statistical graphics).</p><h2 id=pandas-builtin-plottinghttppandaspydataorgpandas-docsversion0180visualizationhtml><a href=http://pandas.pydata.org/pandas-docs/version/0.18.0/visualization.html>Pandas&rsquo; builtin-plotting</a><a hidden class=anchor aria-hidden=true href=#pandas-builtin-plottinghttppandaspydataorgpandas-docsversion0180visualizationhtml>#</a></h2><p><code>DataFrame</code> and <code>Series</code> have a <code>.plot</code> namespace, with various chart types available (<code>line</code>, <code>hist</code>, <code>scatter</code>, etc.).
Pandas objects provide additional metadata that can be used to enhance plots (the Index for a better automatic x-axis then <code>range(n)</code> or Index names as axis labels for example).</p><p>And since pandas had fewer backwards-compatibility constraints, it had a bit better default aesthetics.
The <a href=http://matplotlib.org/style_changes.html>matplotlib 2.0 release</a> will level this, and pandas has <a href=https://github.com/pydata/pandas/issues/11783>deprecated its custom plotting styles</a>, in favor of matplotlib&rsquo;s (technically <a href=https://github.com/pydata/pandas/issues/11727>I just broke</a> it when fixing matplotlib 1.5 compatibility, so we deprecated it after the fact).</p><p>At this point, I see pandas <code>DataFrame.plot</code> as a useful exploratory tool for quick throwaway plots.</p><h2 id=seabornhttpsstanfordedumwaskomsoftwareseaborn><a href=https://stanford.edu/~mwaskom/software/seaborn/>Seaborn</a><a hidden class=anchor aria-hidden=true href=#seabornhttpsstanfordedumwaskomsoftwareseaborn>#</a></h2><p><a href=https://stanford.edu/~mwaskom/software/seaborn/>Seaborn</a>, created by Michael Waskom, &ldquo;provides a high-level interface for drawing attractive statistical graphics.&rdquo; Seaborn gives a great API for quickly exploring different visual representations of your data. We&rsquo;ll be focusing on that today</p><h2 id=bokehhttpbokehpydataorgenlatest><a href=http://bokeh.pydata.org/en/latest/>Bokeh</a><a hidden class=anchor aria-hidden=true href=#bokehhttpbokehpydataorgenlatest>#</a></h2><p><a href=http://bokeh.pydata.org/en/latest/>Bokeh</a> is a (still under heavy development) visualiztion library that targets the browser.</p><p>Like matplotlib, Bokeh has a few APIs at various levels of abstraction.
They have a glyph API, which I suppose is most similar to matplotlib&rsquo;s Artists API, for drawing single or arrays of glpyhs (circles, rectangles, polygons, etc.).
More recently they introduced a Charts API, for producing canned charts from data structures like dicts or DataFrames.</p><h2 id=other-libraries>Other Libraries<a hidden class=anchor aria-hidden=true href=#other-libraries>#</a></h2><p>This is a (probably incomplete) list of other visualization libraries that I don&rsquo;t know enough about to comment on</p><ul><li><a href=https://github.com/ellisonbg/altair>Altair</a></li><li><a href=http://lightning-viz.org/>Lightning</a></li><li><a href=http://holoviews.org/>HoloViews</a></li><li><a href=http://www.glueviz.org/en/stable/>Glueviz</a></li><li><a href=http://vispy.org/>vispy</a></li><li><a href=https://github.com/bloomberg/bqplot>bqplot</a></li><li><a href=https://plot.ly/python/>Plotly</a></li></ul><p>It&rsquo;s also possible to use Javascript tools like D3 directly in the Jupyter notebook, but we won&rsquo;t go into those today.</p><h2 id=examples>Examples<a hidden class=anchor aria-hidden=true href=#examples>#</a></h2><p>I do want to pause and explain the type of work I&rsquo;m doing with these packages.
The vast majority of plots I create are for exploratory analysis, helping me understand the dataset I&rsquo;m working with.
They aren&rsquo;t intended for the client (whoever that is) to see.
Occasionally that exploratory plot will evolve towards a final product that will be used to explain things to the client.
In this case I&rsquo;ll either polish the exploratory plot, or rewrite it in another system more suitable for the final product (in D3 or Bokeh, say, if it needs to be an interactive document in the browser).</p><p>Now that we have a feel for the overall landscape (from my point of view), let&rsquo;s delve into a few examples.
We&rsquo;ll use the <code>diamonds</code> dataset from ggplot2.
You could use Vincent Arelbundock&rsquo;s <a href=https://github.com/vincentarelbundock/Rdatasets>RDatasets package</a> to find it (<code>pd.read_csv('http://vincentarelbundock.github.io/Rdatasets/csv/ggplot2/diamonds.csv')</code>), but I wanted to checkout <a href=https://github.com/wesm/feather>feather</a>.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#f92672>import</span> os
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> feather
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> numpy <span style=color:#66d9ef>as</span> np
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> pandas <span style=color:#66d9ef>as</span> pd
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> matplotlib.pyplot <span style=color:#66d9ef>as</span> plt
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> seaborn <span style=color:#66d9ef>as</span> sns
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>if</span> int(os<span style=color:#f92672>.</span>environ<span style=color:#f92672>.</span>get(<span style=color:#e6db74>&#34;MODERN_PANDAS_EPUB&#34;</span>, <span style=color:#ae81ff>0</span>)):
</span></span><span style=display:flex><span>    <span style=color:#f92672>import</span> prep <span style=color:#75715e># noqa</span>
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#f92672>%</span>load_ext rpy2<span style=color:#f92672>.</span>ipython
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-r data-lang=r><span style=display:flex><span><span style=color:#f92672>%%</span>R
</span></span><span style=display:flex><span><span style=color:#a6e22e>suppressPackageStartupMessages</span>(<span style=color:#a6e22e>library</span>(ggplot2))
</span></span><span style=display:flex><span><span style=color:#a6e22e>library</span>(feather)
</span></span><span style=display:flex><span><span style=color:#a6e22e>write_feather</span>(diamonds, <span style=color:#e6db74>&#39;diamonds.fthr&#39;</span>)
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#f92672>import</span> feather
</span></span><span style=display:flex><span>df <span style=color:#f92672>=</span> feather<span style=color:#f92672>.</span>read_dataframe(<span style=color:#e6db74>&#39;diamonds.fthr&#39;</span>)
</span></span><span style=display:flex><span>df<span style=color:#f92672>.</span>head()
</span></span></code></pre></div><div><style>.dataframe thead tr:only-child th{text-align:right}<pre><code>.dataframe thead th{text-align:left}.dataframe tbody tr th{vertical-align:top}</code></pre><p></style></p><table border=1 class=dataframe><thead><tr style=text-align:right><th></th><th>carat</th><th>cut</th><th>color</th><th>clarity</th><th>depth</th><th>table</th><th>price</th><th>x</th><th>y</th><th>z</th></tr></thead><tbody><tr><th>0</th><td>0.23</td><td>Ideal</td><td>E</td><td>SI2</td><td>61.5</td><td>55.0</td><td>326</td><td>3.95</td><td>3.98</td><td>2.43</td></tr><tr><th>1</th><td>0.21</td><td>Premium</td><td>E</td><td>SI1</td><td>59.8</td><td>61.0</td><td>326</td><td>3.89</td><td>3.84</td><td>2.31</td></tr><tr><th>2</th><td>0.23</td><td>Good</td><td>E</td><td>VS1</td><td>56.9</td><td>65.0</td><td>327</td><td>4.05</td><td>4.07</td><td>2.31</td></tr><tr><th>3</th><td>0.29</td><td>Premium</td><td>I</td><td>VS2</td><td>62.4</td><td>58.0</td><td>334</td><td>4.20</td><td>4.23</td><td>2.63</td></tr><tr><th>4</th><td>0.31</td><td>Good</td><td>J</td><td>SI2</td><td>63.3</td><td>58.0</td><td>335</td><td>4.34</td><td>4.35</td><td>2.75</td></tr></tbody></table></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>df<span style=color:#f92672>.</span>info()
</span></span></code></pre></div><pre><code>&lt;class 'pandas.core.frame.DataFrame'&gt;
RangeIndex: 53940 entries, 0 to 53939
Data columns (total 10 columns):
carat      53940 non-null float64
cut        53940 non-null category
color      53940 non-null category
clarity    53940 non-null category
depth      53940 non-null float64
table      53940 non-null float64
price      53940 non-null int32
x          53940 non-null float64
y          53940 non-null float64
z          53940 non-null float64
dtypes: category(3), float64(6), int32(1)
memory usage: 2.8 MB
</code></pre><p>It&rsquo;s not clear to me where the scientific community will come down on Bokeh for exploratory analysis.
The ability to share interactive graphics is compelling.
The trend towards more and more analysis and communication happening in the browser will only enhance this feature of Bokeh.</p><p>Personally though, I have a lot of inertia behind matplotlib so I haven&rsquo;t switched to Bokeh for day-to-day exploratory analysis.</p><p>I have greatly enjoyed Bokeh for building dashboards and <a href=http://bokeh.pydata.org/en/latest/docs/user_guide/interaction.html>webapps</a> with Bokeh server.
It&rsquo;s still young, and I&rsquo;ve hit <a href=http://stackoverflow.com/questions/36610328/control-bokeh-plot-state-with-http-request>some rough edges</a>, but I&rsquo;m happy to put up with some awkwardness to avoid writing more javascript.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>sns<span style=color:#f92672>.</span>set(context<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;talk&#39;</span>, style<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;ticks&#39;</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>%</span>matplotlib inline
</span></span></code></pre></div><h2 id=matplotlib>Matplotlib<a hidden class=anchor aria-hidden=true href=#matplotlib>#</a></h2><p>Since it&rsquo;s relatively new, I should point out that matplotlib 1.5 added support for plotting labeled data.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>fig, ax <span style=color:#f92672>=</span> plt<span style=color:#f92672>.</span>subplots()
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>ax<span style=color:#f92672>.</span>scatter(x<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;carat&#39;</span>, y<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;depth&#39;</span>, data<span style=color:#f92672>=</span>df, c<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;k&#39;</span>, alpha<span style=color:#f92672>=</span><span style=color:#ae81ff>.15</span>);
</span></span></code></pre></div><p><img loading=lazy src=/images/modern_6_visualization_13_0.png alt=png></p><p>This isn&rsquo;t limited to just <code>DataFrame</code>s.
It supports anything that uses <code>__getitem__</code> (square-brackets) with string keys.
Other than that, I don&rsquo;t have much to add to the <a href=http://matplotlib.org/>matplotlib documentation</a>.</p><h2 id=pandas-built-in-plotting>Pandas Built-in Plotting<a hidden class=anchor aria-hidden=true href=#pandas-built-in-plotting>#</a></h2><p>The metadata in DataFrames gives a bit better defaults on plots.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>df<span style=color:#f92672>.</span>plot<span style=color:#f92672>.</span>scatter(x<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;carat&#39;</span>, y<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;depth&#39;</span>, c<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;k&#39;</span>, alpha<span style=color:#f92672>=</span><span style=color:#ae81ff>.15</span>)
</span></span><span style=display:flex><span>plt<span style=color:#f92672>.</span>tight_layout()
</span></span></code></pre></div><p><img loading=lazy src=/images/modern_6_visualization_17_0.png alt=png></p><p>We get axis labels from the column names.
Nothing major, just nice.</p><p>Pandas can be more convenient for plotting a bunch of columns with a shared x-axis (the index), say several timeseries.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#f92672>from</span> pandas_datareader <span style=color:#f92672>import</span> fred
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>gdp <span style=color:#f92672>=</span> fred<span style=color:#f92672>.</span>FredReader([<span style=color:#e6db74>&#39;GCEC96&#39;</span>, <span style=color:#e6db74>&#39;GPDIC96&#39;</span>], start<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;2000-01-01&#39;</span>)<span style=color:#f92672>.</span>read()
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>gdp<span style=color:#f92672>.</span>rename(columns<span style=color:#f92672>=</span>{<span style=color:#e6db74>&#34;GCEC96&#34;</span>: <span style=color:#e6db74>&#34;Government Expenditure&#34;</span>,
</span></span><span style=display:flex><span>                    <span style=color:#e6db74>&#34;GPDIC96&#34;</span>: <span style=color:#e6db74>&#34;Private Investment&#34;</span>})<span style=color:#f92672>.</span>plot(figsize<span style=color:#f92672>=</span>(<span style=color:#ae81ff>12</span>, <span style=color:#ae81ff>6</span>))
</span></span><span style=display:flex><span>plt<span style=color:#f92672>.</span>tight_layout()
</span></span></code></pre></div><pre><code>/Users/taugspurger/miniconda3/envs/modern-pandas/lib/python3.6/site-packages/ipykernel_launcher.py:3: DeprecationWarning: pandas.core.common.is_list_like is deprecated. import from the public API: pandas.api.types.is_list_like instead
  This is separate from the ipykernel package so we can avoid doing imports until
</code></pre><p><img loading=lazy src=/images/modern_6_visualization_19_1.png alt=png></p><h2 id=seaborn>Seaborn<a hidden class=anchor aria-hidden=true href=#seaborn>#</a></h2><p>The rest of this post will focus on seaborn, and why I think it&rsquo;s especially great for exploratory analysis.</p><p>I would encourage you to read Seaborn&rsquo;s <a href=https://stanford.edu/~mwaskom/software/seaborn/introduction.html#introduction>introductory notes</a>, which describe its design philosophy and attempted goals. Some highlights:</p><blockquote><p>Seaborn aims to make visualization a central part of exploring and understanding data.</p></blockquote><p>It does this through a consistent, understandable (to me anyway) API.</p><blockquote><p>The plotting functions try to do something useful when called with a minimal set of arguments, and they expose a number of customizable options through additional parameters.</p></blockquote><p>Which works great for exploratory analysis, with the option to turn that into something more polished if it looks promising.</p><blockquote><p>Some of the functions plot directly into a matplotlib axes object, while others operate on an entire figure and produce plots with several panels.</p></blockquote><p>The fact that seaborn is built on matplotlib means that if you are familiar with the pyplot API, your knowledge will still be useful.</p><p>Most seaborn plotting functions (one per chart-type) take an <code>x</code>, <code>y</code>, <code>hue</code>, and <code>data</code> arguments (only some are required, depending on the plot type). If you&rsquo;re working with DataFrames, you&rsquo;ll pass in strings referring to column names, and the DataFrame for <code>data</code>.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>sns<span style=color:#f92672>.</span>countplot(x<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;cut&#39;</span>, data<span style=color:#f92672>=</span>df)
</span></span><span style=display:flex><span>sns<span style=color:#f92672>.</span>despine()
</span></span><span style=display:flex><span>plt<span style=color:#f92672>.</span>tight_layout()
</span></span></code></pre></div><p><img loading=lazy src=/images/modern_6_visualization_22_0.png alt=png></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>sns<span style=color:#f92672>.</span>barplot(x<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;cut&#39;</span>, y<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;price&#39;</span>, data<span style=color:#f92672>=</span>df)
</span></span><span style=display:flex><span>sns<span style=color:#f92672>.</span>despine()
</span></span><span style=display:flex><span>plt<span style=color:#f92672>.</span>tight_layout()
</span></span></code></pre></div><p><img loading=lazy src=/images/modern_6_visualization_23_0.png alt=png></p><p>Bivariate relationships can easily be explored, either one at a time:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>sns<span style=color:#f92672>.</span>jointplot(x<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;carat&#39;</span>, y<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;price&#39;</span>, data<span style=color:#f92672>=</span>df, size<span style=color:#f92672>=</span><span style=color:#ae81ff>8</span>, alpha<span style=color:#f92672>=</span><span style=color:#ae81ff>.25</span>,
</span></span><span style=display:flex><span>              color<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;k&#39;</span>, marker<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;.&#39;</span>)
</span></span><span style=display:flex><span>plt<span style=color:#f92672>.</span>tight_layout()
</span></span></code></pre></div><p><img loading=lazy src=/images/modern_6_visualization_25_0.png alt=png></p><p>Or many at once</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>g <span style=color:#f92672>=</span> sns<span style=color:#f92672>.</span>pairplot(df, hue<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;cut&#39;</span>)
</span></span></code></pre></div><p><img loading=lazy src=/images/modern_6_visualization_27_0.png alt=png></p><p><code>pairplot</code> is a convenience wrapper around <code>PairGrid</code>, and offers our first look at an important seaborn abstraction, the <code>Grid</code>. <em>Seaborn <code>Grid</code>s provide a link between a matplotlib <code>Figure</code> with multiple <code>axes</code> and features in your dataset.</em></p><p>There are two main ways of interacting with grids. First, seaborn provides convenience-wrapper functions like <code>pairplot</code>, that have good defaults for common tasks. If you need more flexibility, you can work with the <code>Grid</code> directly by mapping plotting functions over each axes.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>core</span>(df, α<span style=color:#f92672>=</span><span style=color:#ae81ff>.05</span>):
</span></span><span style=display:flex><span>    mask <span style=color:#f92672>=</span> (df <span style=color:#f92672>&gt;</span> df<span style=color:#f92672>.</span>quantile(α))<span style=color:#f92672>.</span>all(<span style=color:#ae81ff>1</span>) <span style=color:#f92672>&amp;</span> (df <span style=color:#f92672>&lt;</span> df<span style=color:#f92672>.</span>quantile(<span style=color:#ae81ff>1</span> <span style=color:#f92672>-</span> α))<span style=color:#f92672>.</span>all(<span style=color:#ae81ff>1</span>)
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> df[mask]
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>cmap <span style=color:#f92672>=</span> sns<span style=color:#f92672>.</span>cubehelix_palette(as_cmap<span style=color:#f92672>=</span><span style=color:#66d9ef>True</span>, dark<span style=color:#f92672>=</span><span style=color:#ae81ff>0</span>, light<span style=color:#f92672>=</span><span style=color:#ae81ff>1</span>, reverse<span style=color:#f92672>=</span><span style=color:#66d9ef>True</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(df<span style=color:#f92672>.</span>select_dtypes(include<span style=color:#f92672>=</span>[np<span style=color:#f92672>.</span>number])
</span></span><span style=display:flex><span>   <span style=color:#f92672>.</span>pipe(core)
</span></span><span style=display:flex><span>   <span style=color:#f92672>.</span>pipe(sns<span style=color:#f92672>.</span>PairGrid)
</span></span><span style=display:flex><span>   <span style=color:#f92672>.</span>map_upper(plt<span style=color:#f92672>.</span>scatter, marker<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;.&#39;</span>, alpha<span style=color:#f92672>=</span><span style=color:#ae81ff>.25</span>)
</span></span><span style=display:flex><span>   <span style=color:#f92672>.</span>map_diag(sns<span style=color:#f92672>.</span>kdeplot)
</span></span><span style=display:flex><span>   <span style=color:#f92672>.</span>map_lower(plt<span style=color:#f92672>.</span>hexbin, cmap<span style=color:#f92672>=</span>cmap, gridsize<span style=color:#f92672>=</span><span style=color:#ae81ff>20</span>)
</span></span><span style=display:flex><span>);
</span></span></code></pre></div><p><img loading=lazy src=/images/modern_6_visualization_30_1.png alt=png></p><p>This last example shows the tight integration with matplotlib. <code>g.axes</code> is an array of <code>matplotlib.Axes</code> and <code>g.fig</code> is a <code>matplotlib.Figure</code>.
This is a pretty common pattern when using seaborn: use a seaborn plotting method (or grid) to get a good start, and then adjust with matplotlib as needed.</p><p>I <em>think</em> (not an expert on this at all) that one thing people like about the grammar of graphics is its flexibility.
You aren&rsquo;t limited to a fixed set of chart types defined by the library author.
Instead, you construct your chart by layering scales, aesthetics and geometries.
And using <code>ggplot2</code> in R is a delight.</p><p>That said, I wouldn&rsquo;t really call what seaborn / matplotlib offer that limited.
You can create pretty complex charts suited to your needs.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>agged <span style=color:#f92672>=</span> df<span style=color:#f92672>.</span>groupby([<span style=color:#e6db74>&#39;cut&#39;</span>, <span style=color:#e6db74>&#39;color&#39;</span>])<span style=color:#f92672>.</span>mean()<span style=color:#f92672>.</span>sort_index()<span style=color:#f92672>.</span>reset_index()
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>g <span style=color:#f92672>=</span> sns<span style=color:#f92672>.</span>PairGrid(agged, x_vars<span style=color:#f92672>=</span>agged<span style=color:#f92672>.</span>columns[<span style=color:#ae81ff>2</span>:], y_vars<span style=color:#f92672>=</span>[<span style=color:#e6db74>&#39;cut&#39;</span>, <span style=color:#e6db74>&#39;color&#39;</span>],
</span></span><span style=display:flex><span>                 size<span style=color:#f92672>=</span><span style=color:#ae81ff>5</span>, aspect<span style=color:#f92672>=</span><span style=color:#ae81ff>.65</span>)
</span></span><span style=display:flex><span>g<span style=color:#f92672>.</span>map(sns<span style=color:#f92672>.</span>stripplot, orient<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;h&#34;</span>, size<span style=color:#f92672>=</span><span style=color:#ae81ff>10</span>, palette<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;Blues_d&#39;</span>);
</span></span></code></pre></div><p><img loading=lazy src=/images/modern_6_visualization_32_1.png alt=png></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>g <span style=color:#f92672>=</span> sns<span style=color:#f92672>.</span>FacetGrid(df, col<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;color&#39;</span>, hue<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;color&#39;</span>, col_wrap<span style=color:#f92672>=</span><span style=color:#ae81ff>4</span>)
</span></span><span style=display:flex><span>g<span style=color:#f92672>.</span>map(sns<span style=color:#f92672>.</span>regplot, <span style=color:#e6db74>&#39;carat&#39;</span>, <span style=color:#e6db74>&#39;price&#39;</span>);
</span></span></code></pre></div><p><img loading=lazy src=/images/modern_6_visualization_33_1.png alt=png></p><p>Initially I had many more examples showing off seaborn, but I&rsquo;ll spare you.
Seaborn&rsquo;s <a href=https://stanford.edu/~mwaskom/software/seaborn/>documentation</a> is thorough (and just beautiful to look at).</p><p>We&rsquo;ll end with a nice scikit-learn integration for exploring the parameter-space on a GridSearch object.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#f92672>from</span> sklearn.ensemble <span style=color:#f92672>import</span> RandomForestClassifier
</span></span><span style=display:flex><span><span style=color:#f92672>from</span> sklearn.model_selection <span style=color:#f92672>import</span> GridSearchCV
</span></span></code></pre></div><p>For those unfamiliar with machine learning or scikit-learn, the basic idea is your algorithm (<code>RandomForestClassifer</code>) is trying to maximize some objective function (percent of correctly classified items in this case).
There are various <em>hyperparameters</em> that affect the fit.
We can search this space by trying out a bunch of possible values for each parameter with the <code>GridSearchCV</code> estimator.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>df <span style=color:#f92672>=</span> sns<span style=color:#f92672>.</span>load_dataset(<span style=color:#e6db74>&#39;titanic&#39;</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>clf <span style=color:#f92672>=</span> RandomForestClassifier()
</span></span><span style=display:flex><span>param_grid <span style=color:#f92672>=</span> dict(max_depth<span style=color:#f92672>=</span>[<span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>2</span>, <span style=color:#ae81ff>5</span>, <span style=color:#ae81ff>10</span>, <span style=color:#ae81ff>20</span>, <span style=color:#ae81ff>30</span>, <span style=color:#ae81ff>40</span>],
</span></span><span style=display:flex><span>                  min_samples_split<span style=color:#f92672>=</span>[<span style=color:#ae81ff>2</span>, <span style=color:#ae81ff>5</span>, <span style=color:#ae81ff>10</span>],
</span></span><span style=display:flex><span>                  min_samples_leaf<span style=color:#f92672>=</span>[<span style=color:#ae81ff>2</span>, <span style=color:#ae81ff>3</span>, <span style=color:#ae81ff>5</span>])
</span></span><span style=display:flex><span>est <span style=color:#f92672>=</span> GridSearchCV(clf, param_grid<span style=color:#f92672>=</span>param_grid, n_jobs<span style=color:#f92672>=</span><span style=color:#ae81ff>4</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>y <span style=color:#f92672>=</span> df[<span style=color:#e6db74>&#39;survived&#39;</span>]
</span></span><span style=display:flex><span>X <span style=color:#f92672>=</span> df<span style=color:#f92672>.</span>drop([<span style=color:#e6db74>&#39;survived&#39;</span>, <span style=color:#e6db74>&#39;who&#39;</span>, <span style=color:#e6db74>&#39;alive&#39;</span>], axis<span style=color:#f92672>=</span><span style=color:#ae81ff>1</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>X <span style=color:#f92672>=</span> pd<span style=color:#f92672>.</span>get_dummies(X, drop_first<span style=color:#f92672>=</span><span style=color:#66d9ef>True</span>)
</span></span><span style=display:flex><span>X <span style=color:#f92672>=</span> X<span style=color:#f92672>.</span>fillna(value<span style=color:#f92672>=</span>X<span style=color:#f92672>.</span>median())
</span></span><span style=display:flex><span>est<span style=color:#f92672>.</span>fit(X, y);
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>scores <span style=color:#f92672>=</span> pd<span style=color:#f92672>.</span>DataFrame(est<span style=color:#f92672>.</span>cv_results_)
</span></span><span style=display:flex><span>scores<span style=color:#f92672>.</span>head()
</span></span></code></pre></div><div><style>.dataframe thead tr:only-child th{text-align:right}<pre><code>.dataframe thead th{text-align:left}.dataframe tbody tr th{vertical-align:top}</code></pre><p></style></p><table border=1 class=dataframe><thead><tr style=text-align:right><th></th><th>mean_fit_time</th><th>mean_score_time</th><th>mean_test_score</th><th>mean_train_score</th><th>param_max_depth</th><th>param_min_samples_leaf</th><th>param_min_samples_split</th><th>params</th><th>rank_test_score</th><th>split0_test_score</th><th>split0_train_score</th><th>split1_test_score</th><th>split1_train_score</th><th>split2_test_score</th><th>split2_train_score</th><th>std_fit_time</th><th>std_score_time</th><th>std_test_score</th><th>std_train_score</th></tr></thead><tbody><tr><th>0</th><td>0.017463</td><td>0.002174</td><td>0.786756</td><td>0.797419</td><td>1</td><td>2</td><td>2</td><td>{'max_depth': 1, 'min_samples_leaf': 2, 'min_s...</td><td>54</td><td>0.767677</td><td>0.804714</td><td>0.808081</td><td>0.797980</td><td>0.784512</td><td>0.789562</td><td>0.000489</td><td>0.000192</td><td>0.016571</td><td>0.006198</td></tr><tr><th>1</th><td>0.014982</td><td>0.001843</td><td>0.773288</td><td>0.783951</td><td>1</td><td>2</td><td>5</td><td>{'max_depth': 1, 'min_samples_leaf': 2, 'min_s...</td><td>57</td><td>0.767677</td><td>0.804714</td><td>0.754209</td><td>0.752525</td><td>0.797980</td><td>0.794613</td><td>0.001900</td><td>0.000356</td><td>0.018305</td><td>0.022600</td></tr><tr><th>2</th><td>0.013890</td><td>0.001895</td><td>0.771044</td><td>0.786195</td><td>1</td><td>2</td><td>10</td><td>{'max_depth': 1, 'min_samples_leaf': 2, 'min_s...</td><td>58</td><td>0.767677</td><td>0.811448</td><td>0.754209</td><td>0.752525</td><td>0.791246</td><td>0.794613</td><td>0.000935</td><td>0.000112</td><td>0.015307</td><td>0.024780</td></tr><tr><th>3</th><td>0.015679</td><td>0.001691</td><td>0.764310</td><td>0.760943</td><td>1</td><td>3</td><td>2</td><td>{'max_depth': 1, 'min_samples_leaf': 3, 'min_s...</td><td>61</td><td>0.801347</td><td>0.799663</td><td>0.700337</td><td>0.695286</td><td>0.791246</td><td>0.787879</td><td>0.001655</td><td>0.000025</td><td>0.045423</td><td>0.046675</td></tr><tr><th>4</th><td>0.013034</td><td>0.001695</td><td>0.765432</td><td>0.787318</td><td>1</td><td>3</td><td>5</td><td>{'max_depth': 1, 'min_samples_leaf': 3, 'min_s...</td><td>60</td><td>0.710438</td><td>0.772727</td><td>0.801347</td><td>0.781145</td><td>0.784512</td><td>0.808081</td><td>0.000289</td><td>0.000038</td><td>0.039490</td><td>0.015079</td></tr></tbody></table></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>sns<span style=color:#f92672>.</span>factorplot(x<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;param_max_depth&#39;</span>, y<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;mean_test_score&#39;</span>,
</span></span><span style=display:flex><span>               col<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;param_min_samples_split&#39;</span>,
</span></span><span style=display:flex><span>               hue<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;param_min_samples_leaf&#39;</span>,
</span></span><span style=display:flex><span>               data<span style=color:#f92672>=</span>scores);
</span></span></code></pre></div><p><img loading=lazy src=/images/modern_6_visualization_39_0.png alt=png></p><p>Thanks for reading!
I want to reiterate at the end that this is just <em>my</em> way of doing data visualization.
Your needs might differ, meaning you might need different tools.
You can still use pandas to get it to the point where it&rsquo;s ready to be visualized!</p><p>As always, <a href=https://twitter.com/tomaugspurger>feedback is welcome</a>.</p></div><footer class=post-footer><ul class=post-tags><li><a href=https://tomaugspurger.github.io/tags/pandas/>pandas</a></li></ul></footer></article></main><footer class=footer><span>&copy; 2023 <a href=https://tomaugspurger.github.io>Tom's Blog</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><a rel=me href=https://mastodon.social/@TomAugspurger></a>
<script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>