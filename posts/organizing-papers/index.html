<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Organizing Papers | Tom's Blog</title><meta name=keywords content="python,scripts"><meta name=description content="As a graduate student, you read a lot of journal articles&mldr; a lot. With the material in the articles being as difficult as it is, I didn&rsquo;t want to worry about organizing everything as well. That&rsquo;s why I wrote this script to help (I may have also been procrastinating from studying for my qualifiers). This was one of my earliest little projects, so I&rsquo;m not claiming that this is the best way to do anything."><meta name=author content><link rel=canonical href=https://tomaugspurger.github.io/posts/organizing-papers/><link crossorigin=anonymous href=/assets/css/stylesheet.3690c96d8a707265a16abd3b389bb33e4e3916869c3142cba43a3cfaaed4b5f9.css integrity="sha256-NpDJbYpwcmWhar07OJuzPk45FoacMULLpDo8+q7Utfk=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG+9vmJ0cTS+ovo0FeA=" onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://tomaugspurger.github.io/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://tomaugspurger.github.io/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://tomaugspurger.github.io/favicon-32x32.png><link rel=apple-touch-icon href=https://tomaugspurger.github.io/apple-touch-icon.png><link rel=mask-icon href=https://tomaugspurger.github.io/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:title" content="Organizing Papers"><meta property="og:description" content="As a graduate student, you read a lot of journal articles&mldr; a lot. With the material in the articles being as difficult as it is, I didn&rsquo;t want to worry about organizing everything as well. That&rsquo;s why I wrote this script to help (I may have also been procrastinating from studying for my qualifiers). This was one of my earliest little projects, so I&rsquo;m not claiming that this is the best way to do anything."><meta property="og:type" content="article"><meta property="og:url" content="https://tomaugspurger.github.io/posts/organizing-papers/"><meta property="article:section" content="posts"><meta name=twitter:card content="summary"><meta name=twitter:title content="Organizing Papers"><meta name=twitter:description content="As a graduate student, you read a lot of journal articles&mldr; a lot. With the material in the articles being as difficult as it is, I didn&rsquo;t want to worry about organizing everything as well. That&rsquo;s why I wrote this script to help (I may have also been procrastinating from studying for my qualifiers). This was one of my earliest little projects, so I&rsquo;m not claiming that this is the best way to do anything."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":2,"name":"Posts","item":"https://tomaugspurger.github.io/posts/"},{"@type":"ListItem","position":3,"name":"Organizing Papers","item":"https://tomaugspurger.github.io/posts/organizing-papers/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Organizing Papers","name":"Organizing Papers","description":"As a graduate student, you read a lot of journal articles\u0026hellip; a lot. With the material in the articles being as difficult as it is, I didn\u0026rsquo;t want to worry about organizing everything as well. That\u0026rsquo;s why I wrote this script to help (I may have also been procrastinating from studying for my qualifiers). This was one of my earliest little projects, so I\u0026rsquo;m not claiming that this is the best way to do anything.","keywords":["python","scripts"],"articleBody":"As a graduate student, you read a lot of journal articles… a lot. With the material in the articles being as difficult as it is, I didn’t want to worry about organizing everything as well. That’s why I wrote this script to help (I may have also been procrastinating from studying for my qualifiers). This was one of my earliest little projects, so I’m not claiming that this is the best way to do anything.\nMy goal was to have a central repository of papers that was organized by an author’s last name. Under each author’s name would go all of their papers I had read or planned to read. I needed it to be portable so that I could access any paper from my computer or iPad, so Dropbox was a necessity. I also needed to organize the papers by subject. I wanted to easily get to all the papers on Asset Pricing, without having to go through each of the authors separately. Symbolic links were a natural solution to my problem. A canonical copy of each paper would be stored under /Drobox/Papers/, and I could refer that paper from /Macro/Asset Pricing/ with a symbolic link. Symbolic links avoid the problem of having multiple copies of the same paper. Any highlighting or notes I make on a paper is automatically spread to anywhere that paper is linked from.\nimport os import re import sys import subprocess import pathlib class Parser(object): def __init__(self, path, repo=pathlib.PosixPath('/Users/tom/Economics/Papers')): self.repo = repo self.path = self.path_parse(path) self.exists = self.check_existance(self.path) self.is_full = self.check_full(path) self.check_type(self.path) self.added = [] def path_parse(self, path): \"\"\"Ensures a common point of entry to the functions. Returns a pathlib.PosixPath object \"\"\" if not isinstance(path, pathlib.PosixPath): path = pathlib.PosixPath(path) return path else: return path def check_existance(self, path): if not path.exists(): raise OSError('The supplied path does not exist.') else: return True def check_type(self, path): if path.is_dir(): self.is_dir = True self.is_file = False else: self.is_file = True self.is_dir = False def check_full(self, path): if path.parent().as_posix() in path.as_posix(): return True def parser(self, f): \"\"\"The parsing logic to find authors and paper name from a file. f is a full path. \"\"\" try: file_name = f.parts[-1] self.file_name = file_name r = re.compile(r' \\([\\d-]{0,4}\\)') sep_authors = re.compile(r' \u0026 |, | and') all_authors, paper = re.split(r, file_name) paper = paper.lstrip(' - ') authors = re.split(sep_authors, all_authors) authors = [author.strip('\u0026 ' or 'and ') for author in authors] self.authors, self.paper = authors, paper return (authors, paper) except: print('Missed on {}'.format(file_name)) def make_dir(self, authors): repo = self.repo for author in authors: try: os.mkdir(repo[author].as_posix()) except OSError: pass def copy_and_link(self, authors, f, replace=True): repo = self.repo file_name = f.parts[-1] for author in authors: if author == authors[0]: try: subprocess.call([\"cp\", f.as_posix(), repo[author].as_posix()]) success = True except: success = False else: subprocess.call([\"ln\", \"-s\", repo[authors[0]][file_name].as_posix(), repo[author].as_posix()]) success = True if replace and author == authors[0] and success: try: f.unlink() subprocess.call([\"ln\", \"-s\", repo[authors[0]][file_name].as_posix(), f.parts[:-1].as_posix()]) except: raise OSError def main(self, f): authors, paper = self.parser(f) self.make_dir(authors) self.copy_and_link(authors, f) def run(self): if self.exists and self.is_full: if self.is_dir: for f in self.path: if f.parts[-1][0] == '.' or f.is_symlink(): pass else: try: self.main(f) self.added.append(f) except: print('Failed on %s' % str(f)) else: self.main(self.path) self.added.append(self.path) for item in self.added: print(item.parts[-1]) if __name__ == \"__main__\": p = pathlib.PosixPath(sys.argv[1]) try: repo = pathlib.PosixPath(sys.argv[2]) except: repo = pathlib.PosixPath('/Users/tom/Economics/Papers') print(p) obj = Parser(p, repo) obj.run() The script takes two arguments, the folder to work on and the folder to store the results (defaults to /Users/tom/Economics/Papers). Already a could things jump out that I should update. If I ever wanted to add more sophisticated command line arguments I would want to switch to something like argparse. I also shouldn’t have something like /Users/tom anywhere. This kills portability since it’s specific to my computer (use os.path.expanduser('~') instead).\nI create a Parser which finds every paper in the directory given by the first argument. I had to settle on a standard naming for my papers. I chose Author1, Author2, ... and AuthorN (YYYY) - Paper Title. Whenever Parser find that pattern, it splits off the Authors from the title of the paper, and stores the location of the file.\nAfter doing this for each paper in the directory, it’s time to copy and link the files.\nfor author in authors: if author == authors[0]: try: subprocess.call([\"cp\", f.as_posix(), repo[author].as_posix()]) success = True except: success = False else: subprocess.call([\"ln\", \"-s\", repo[authors[0]][file_name].as_posix(), repo[author].as_posix()]) success = True Since I just one one actual copy of the paper on file, I only copy the paper to the first author’s sub-folder. Thats the if author == authors[0]. Every other author just links to the copy stored in the first author’s folder. The wiser me of today would use something like shutil to copy the files instead of subprocess, but I was still new to python.\nThe biggest drawback is that I can’t differentiate multiple authors with the same last name that well. I need to edit the original names to include the first initials (C. Romer and D. Romer (2010)). But overall I’m pleased with the results.\n","wordCount":"831","inLanguage":"en","datePublished":"0001-01-01T00:00:00Z","dateModified":"0001-01-01T00:00:00Z","mainEntityOfPage":{"@type":"WebPage","@id":"https://tomaugspurger.github.io/posts/organizing-papers/"},"publisher":{"@type":"Organization","name":"Tom's Blog","logo":{"@type":"ImageObject","url":"https://tomaugspurger.github.io/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://tomaugspurger.github.io accesskey=h title="Tom's Blog (Alt + H)">Tom's Blog</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://tomaugspurger.github.io/about/ title=About><span>About</span></a></li><li><a href=https://tomaugspurger.github.io/archives title=Archive><span>Archive</span></a></li><li><a href=https://tomaugspurger.github.io/index.xml title=RSS><span>RSS</span></a></li><li><a href=https://tomaugspurger.github.io/tags title=Tags><span>Tags</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class=post-title>Organizing Papers</h1><div class=post-meta></div></header><div class=post-content><p>As a graduate student, you read a lot of journal articles&mldr; <em>a lot</em>.
With the material in the articles being as difficult as it is, I didn&rsquo;t want to worry about organizing everything as well.
That&rsquo;s why I wrote <a href=https://gist.github.com/TomAugspurger/8976751>this script</a> to help (I may have also been procrastinating from studying for my qualifiers). This was one of my earliest little projects, so I&rsquo;m not claiming that this is the best way to do anything.</p><p>My goal was to have a central repository of papers that was organized by an author&rsquo;s last name. Under each author&rsquo;s name would go all of their papers I had read or planned to read.
I needed it to be portable so that I could access any paper from my computer or iPad, so Dropbox was a necessity. I also needed to organize the papers by subject. I wanted to easily get to all the papers on Asset Pricing, without having to go through each of the authors separately.
<a href=http://en.wikipedia.org/wiki/Symbolic_link>Symbolic links</a> were a natural solution to my problem.
A canonical copy of each paper would be stored under <code>/Drobox/Papers/&lt;author name></code>, and I could refer that paper from <code>/Macro/Asset Pricing/</code> with a symbolic link. Symbolic links avoid the problem of having multiple copies of the same paper. Any highlighting or notes I make on a paper is automatically spread to anywhere that paper is linked from.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#f92672>import</span> os
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> re
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> sys
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> subprocess
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> pathlib
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Parser</span>(object):
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>def</span> __init__(self, path,
</span></span><span style=display:flex><span>                 repo<span style=color:#f92672>=</span>pathlib<span style=color:#f92672>.</span>PosixPath(<span style=color:#e6db74>&#39;/Users/tom/Economics/Papers&#39;</span>)):
</span></span><span style=display:flex><span>        self<span style=color:#f92672>.</span>repo <span style=color:#f92672>=</span> repo
</span></span><span style=display:flex><span>        self<span style=color:#f92672>.</span>path <span style=color:#f92672>=</span> self<span style=color:#f92672>.</span>path_parse(path)
</span></span><span style=display:flex><span>        self<span style=color:#f92672>.</span>exists <span style=color:#f92672>=</span> self<span style=color:#f92672>.</span>check_existance(self<span style=color:#f92672>.</span>path)
</span></span><span style=display:flex><span>        self<span style=color:#f92672>.</span>is_full <span style=color:#f92672>=</span> self<span style=color:#f92672>.</span>check_full(path)
</span></span><span style=display:flex><span>        self<span style=color:#f92672>.</span>check_type(self<span style=color:#f92672>.</span>path)
</span></span><span style=display:flex><span>        self<span style=color:#f92672>.</span>added <span style=color:#f92672>=</span> []
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>def</span> <span style=color:#a6e22e>path_parse</span>(self, path):
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;&#34;&#34;Ensures a common point of entry to the functions.
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        Returns a pathlib.PosixPath object
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        &#34;&#34;&#34;</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> <span style=color:#f92672>not</span> isinstance(path, pathlib<span style=color:#f92672>.</span>PosixPath):
</span></span><span style=display:flex><span>            path <span style=color:#f92672>=</span> pathlib<span style=color:#f92672>.</span>PosixPath(path)
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>return</span> path
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>else</span>:
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>return</span> path
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>def</span> <span style=color:#a6e22e>check_existance</span>(self, path):
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> <span style=color:#f92672>not</span> path<span style=color:#f92672>.</span>exists():
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>raise</span> <span style=color:#a6e22e>OSError</span>(<span style=color:#e6db74>&#39;The supplied path does not exist.&#39;</span>)
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>else</span>:
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>True</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>def</span> <span style=color:#a6e22e>check_type</span>(self, path):
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> path<span style=color:#f92672>.</span>is_dir():
</span></span><span style=display:flex><span>            self<span style=color:#f92672>.</span>is_dir <span style=color:#f92672>=</span> <span style=color:#66d9ef>True</span>
</span></span><span style=display:flex><span>            self<span style=color:#f92672>.</span>is_file <span style=color:#f92672>=</span> <span style=color:#66d9ef>False</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>else</span>:
</span></span><span style=display:flex><span>            self<span style=color:#f92672>.</span>is_file <span style=color:#f92672>=</span> <span style=color:#66d9ef>True</span>
</span></span><span style=display:flex><span>            self<span style=color:#f92672>.</span>is_dir <span style=color:#f92672>=</span> <span style=color:#66d9ef>False</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>def</span> <span style=color:#a6e22e>check_full</span>(self, path):
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> path<span style=color:#f92672>.</span>parent()<span style=color:#f92672>.</span>as_posix() <span style=color:#f92672>in</span> path<span style=color:#f92672>.</span>as_posix():
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>True</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>def</span> <span style=color:#a6e22e>parser</span>(self, f):
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;&#34;&#34;The parsing logic to find authors and paper name from a file.
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        f is a full path.
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        &#34;&#34;&#34;</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>try</span>:
</span></span><span style=display:flex><span>            file_name <span style=color:#f92672>=</span> f<span style=color:#f92672>.</span>parts[<span style=color:#f92672>-</span><span style=color:#ae81ff>1</span>]
</span></span><span style=display:flex><span>            self<span style=color:#f92672>.</span>file_name <span style=color:#f92672>=</span> file_name
</span></span><span style=display:flex><span>            r <span style=color:#f92672>=</span> re<span style=color:#f92672>.</span>compile(<span style=color:#e6db74>r</span><span style=color:#e6db74>&#39; \([\d-]{0,4}\)&#39;</span>)
</span></span><span style=display:flex><span>            sep_authors <span style=color:#f92672>=</span> re<span style=color:#f92672>.</span>compile(<span style=color:#e6db74>r</span><span style=color:#e6db74>&#39; &amp; |, | and&#39;</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            all_authors, paper <span style=color:#f92672>=</span> re<span style=color:#f92672>.</span>split(r, file_name)
</span></span><span style=display:flex><span>            paper <span style=color:#f92672>=</span> paper<span style=color:#f92672>.</span>lstrip(<span style=color:#e6db74>&#39; - &#39;</span>)
</span></span><span style=display:flex><span>            authors <span style=color:#f92672>=</span> re<span style=color:#f92672>.</span>split(sep_authors, all_authors)
</span></span><span style=display:flex><span>            authors <span style=color:#f92672>=</span> [author<span style=color:#f92672>.</span>strip(<span style=color:#e6db74>&#39;&amp; &#39;</span> <span style=color:#f92672>or</span> <span style=color:#e6db74>&#39;and &#39;</span>) <span style=color:#66d9ef>for</span> author <span style=color:#f92672>in</span> authors]
</span></span><span style=display:flex><span>            self<span style=color:#f92672>.</span>authors, self<span style=color:#f92672>.</span>paper <span style=color:#f92672>=</span> authors, paper
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>return</span> (authors, paper)
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>except</span>:
</span></span><span style=display:flex><span>            print(<span style=color:#e6db74>&#39;Missed on </span><span style=color:#e6db74>{}</span><span style=color:#e6db74>&#39;</span><span style=color:#f92672>.</span>format(file_name))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>def</span> <span style=color:#a6e22e>make_dir</span>(self, authors):
</span></span><span style=display:flex><span>        repo <span style=color:#f92672>=</span> self<span style=color:#f92672>.</span>repo
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>for</span> author <span style=color:#f92672>in</span> authors:
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>try</span>:
</span></span><span style=display:flex><span>                os<span style=color:#f92672>.</span>mkdir(repo[author]<span style=color:#f92672>.</span>as_posix())
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>except</span> <span style=color:#a6e22e>OSError</span>:
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>pass</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>def</span> <span style=color:#a6e22e>copy_and_link</span>(self, authors, f, replace<span style=color:#f92672>=</span><span style=color:#66d9ef>True</span>):
</span></span><span style=display:flex><span>        repo <span style=color:#f92672>=</span> self<span style=color:#f92672>.</span>repo
</span></span><span style=display:flex><span>        file_name <span style=color:#f92672>=</span> f<span style=color:#f92672>.</span>parts[<span style=color:#f92672>-</span><span style=color:#ae81ff>1</span>]
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>for</span> author <span style=color:#f92672>in</span> authors:
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>if</span> author <span style=color:#f92672>==</span> authors[<span style=color:#ae81ff>0</span>]:
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>try</span>:
</span></span><span style=display:flex><span>                    subprocess<span style=color:#f92672>.</span>call([<span style=color:#e6db74>&#34;cp&#34;</span>, f<span style=color:#f92672>.</span>as_posix(),
</span></span><span style=display:flex><span>                                    repo[author]<span style=color:#f92672>.</span>as_posix()])
</span></span><span style=display:flex><span>                    success <span style=color:#f92672>=</span> <span style=color:#66d9ef>True</span>
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>except</span>:
</span></span><span style=display:flex><span>                    success <span style=color:#f92672>=</span> <span style=color:#66d9ef>False</span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>else</span>:
</span></span><span style=display:flex><span>                subprocess<span style=color:#f92672>.</span>call([<span style=color:#e6db74>&#34;ln&#34;</span>, <span style=color:#e6db74>&#34;-s&#34;</span>,
</span></span><span style=display:flex><span>                                repo[authors[<span style=color:#ae81ff>0</span>]][file_name]<span style=color:#f92672>.</span>as_posix(),
</span></span><span style=display:flex><span>                                repo[author]<span style=color:#f92672>.</span>as_posix()])
</span></span><span style=display:flex><span>                success <span style=color:#f92672>=</span> <span style=color:#66d9ef>True</span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>if</span> replace <span style=color:#f92672>and</span> author <span style=color:#f92672>==</span> authors[<span style=color:#ae81ff>0</span>] <span style=color:#f92672>and</span> success:
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>try</span>:
</span></span><span style=display:flex><span>                    f<span style=color:#f92672>.</span>unlink()
</span></span><span style=display:flex><span>                    subprocess<span style=color:#f92672>.</span>call([<span style=color:#e6db74>&#34;ln&#34;</span>, <span style=color:#e6db74>&#34;-s&#34;</span>,
</span></span><span style=display:flex><span>                                    repo[authors[<span style=color:#ae81ff>0</span>]][file_name]<span style=color:#f92672>.</span>as_posix(),
</span></span><span style=display:flex><span>                                    f<span style=color:#f92672>.</span>parts[:<span style=color:#f92672>-</span><span style=color:#ae81ff>1</span>]<span style=color:#f92672>.</span>as_posix()])
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>except</span>:
</span></span><span style=display:flex><span>                    <span style=color:#66d9ef>raise</span> <span style=color:#a6e22e>OSError</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>def</span> <span style=color:#a6e22e>main</span>(self, f):
</span></span><span style=display:flex><span>        authors, paper <span style=color:#f92672>=</span> self<span style=color:#f92672>.</span>parser(f)
</span></span><span style=display:flex><span>        self<span style=color:#f92672>.</span>make_dir(authors)
</span></span><span style=display:flex><span>        self<span style=color:#f92672>.</span>copy_and_link(authors, f)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>def</span> <span style=color:#a6e22e>run</span>(self):
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> self<span style=color:#f92672>.</span>exists <span style=color:#f92672>and</span> self<span style=color:#f92672>.</span>is_full:
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>if</span> self<span style=color:#f92672>.</span>is_dir:
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>for</span> f <span style=color:#f92672>in</span> self<span style=color:#f92672>.</span>path:
</span></span><span style=display:flex><span>                    <span style=color:#66d9ef>if</span> f<span style=color:#f92672>.</span>parts[<span style=color:#f92672>-</span><span style=color:#ae81ff>1</span>][<span style=color:#ae81ff>0</span>] <span style=color:#f92672>==</span> <span style=color:#e6db74>&#39;.&#39;</span> <span style=color:#f92672>or</span> f<span style=color:#f92672>.</span>is_symlink():
</span></span><span style=display:flex><span>                        <span style=color:#66d9ef>pass</span>
</span></span><span style=display:flex><span>                    <span style=color:#66d9ef>else</span>:
</span></span><span style=display:flex><span>                        <span style=color:#66d9ef>try</span>:
</span></span><span style=display:flex><span>                            self<span style=color:#f92672>.</span>main(f)
</span></span><span style=display:flex><span>                            self<span style=color:#f92672>.</span>added<span style=color:#f92672>.</span>append(f)
</span></span><span style=display:flex><span>                        <span style=color:#66d9ef>except</span>:
</span></span><span style=display:flex><span>                            print(<span style=color:#e6db74>&#39;Failed on </span><span style=color:#e6db74>%s</span><span style=color:#e6db74>&#39;</span> <span style=color:#f92672>%</span> str(f))
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>else</span>:
</span></span><span style=display:flex><span>                self<span style=color:#f92672>.</span>main(self<span style=color:#f92672>.</span>path)
</span></span><span style=display:flex><span>                self<span style=color:#f92672>.</span>added<span style=color:#f92672>.</span>append(self<span style=color:#f92672>.</span>path)
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>for</span> item <span style=color:#f92672>in</span> self<span style=color:#f92672>.</span>added:
</span></span><span style=display:flex><span>                print(item<span style=color:#f92672>.</span>parts[<span style=color:#f92672>-</span><span style=color:#ae81ff>1</span>])
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>if</span> __name__ <span style=color:#f92672>==</span> <span style=color:#e6db74>&#34;__main__&#34;</span>:
</span></span><span style=display:flex><span>    p <span style=color:#f92672>=</span> pathlib<span style=color:#f92672>.</span>PosixPath(sys<span style=color:#f92672>.</span>argv[<span style=color:#ae81ff>1</span>])
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>try</span>:
</span></span><span style=display:flex><span>        repo <span style=color:#f92672>=</span> pathlib<span style=color:#f92672>.</span>PosixPath(sys<span style=color:#f92672>.</span>argv[<span style=color:#ae81ff>2</span>])
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>except</span>:
</span></span><span style=display:flex><span>        repo <span style=color:#f92672>=</span> pathlib<span style=color:#f92672>.</span>PosixPath(<span style=color:#e6db74>&#39;/Users/tom/Economics/Papers&#39;</span>)
</span></span><span style=display:flex><span>    print(p)
</span></span><span style=display:flex><span>    obj <span style=color:#f92672>=</span> Parser(p, repo)
</span></span><span style=display:flex><span>    obj<span style=color:#f92672>.</span>run()
</span></span></code></pre></div><p>The script takes two arguments, the folder to work on and the folder to store the results (defaults to <code>/Users/tom/Economics/Papers</code>). Already a could things jump out that I should update. If I ever wanted to add more sophisticated command line arguments I would want to switch to something like <a href=http://docs.python.org/dev/library/argparse.html><code>argparse</code></a>. I also shouldn&rsquo;t have something like <code>/Users/tom</code> anywhere. This kills portability since it&rsquo;s specific to my computer (use <code>os.path.expanduser('~')</code> instead).</p><p>I create a <code>Parser</code> which finds every paper in the directory given by the first argument. I had to settle on a standard naming for my papers. I chose <code>Author1, Author2, ... and AuthorN (YYYY) - Paper Title</code>. Whenever <code>Parser</code> find that pattern, it splits off the Authors from the title of the paper, and stores the location of the file.</p><p>After doing this for each paper in the directory, it&rsquo;s time to copy and link the files.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#66d9ef>for</span> author <span style=color:#f92672>in</span> authors:
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> author <span style=color:#f92672>==</span> authors[<span style=color:#ae81ff>0</span>]:
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>try</span>:
</span></span><span style=display:flex><span>            subprocess<span style=color:#f92672>.</span>call([<span style=color:#e6db74>&#34;cp&#34;</span>, f<span style=color:#f92672>.</span>as_posix(),
</span></span><span style=display:flex><span>                            repo[author]<span style=color:#f92672>.</span>as_posix()])
</span></span><span style=display:flex><span>            success <span style=color:#f92672>=</span> <span style=color:#66d9ef>True</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>except</span>:
</span></span><span style=display:flex><span>            success <span style=color:#f92672>=</span> <span style=color:#66d9ef>False</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>else</span>:
</span></span><span style=display:flex><span>        subprocess<span style=color:#f92672>.</span>call([<span style=color:#e6db74>&#34;ln&#34;</span>, <span style=color:#e6db74>&#34;-s&#34;</span>,
</span></span><span style=display:flex><span>                        repo[authors[<span style=color:#ae81ff>0</span>]][file_name]<span style=color:#f92672>.</span>as_posix(),
</span></span><span style=display:flex><span>                        repo[author]<span style=color:#f92672>.</span>as_posix()])
</span></span><span style=display:flex><span>        success <span style=color:#f92672>=</span> <span style=color:#66d9ef>True</span>
</span></span></code></pre></div><p>Since I just one one actual copy of the paper on file, I only copy the paper to the first author&rsquo;s sub-folder. Thats the <code>if author == authors[0]</code>. Every other author just links to the copy stored in the first author&rsquo;s folder. The wiser me of today would use something like <a href=http://docs.python.org/2/library/shutil.html><code>shutil</code></a> to copy the files instead of <code>subprocess</code>, but I was still new to python.</p><iframe src=https://www.flickr.com/photos/81581328@N02/12501636805/player/3eb021f38a height=509 width=800 frameborder=0 allowfullscreen webkitallowfullscreen mozallowfullscreen oallowfullscreen msallowfullscreen></iframe><p>The biggest drawback is that I can&rsquo;t differentiate multiple authors with the same last name that well. I need to edit the original names to include the first initials (<code>C. Romer and D. Romer (2010)</code>). But overall I&rsquo;m pleased with the results.</p></div><footer class=post-footer><ul class=post-tags><li><a href=https://tomaugspurger.github.io/tags/python/>python</a></li><li><a href=https://tomaugspurger.github.io/tags/scripts/>scripts</a></li></ul></footer></article></main><footer class=footer><span>&copy; 2023 <a href=https://tomaugspurger.github.io>Tom's Blog</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><a rel=me href=https://mastodon.social/@TomAugspurger></a>
<script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>