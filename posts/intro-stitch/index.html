<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Introducing Stitch | Tom's Blog</title>
<meta name=keywords content><meta name=description content="Today I released stitch into the wild. If you haven&rsquo;t yet, check out the examples page to see an example of what stitch does, and the Github repo for how to install. I&rsquo;m using this post to explain why I wrote stitch, and some issues it tries to solve.
Why knitr / knitpy / stitch / RMarkdown? Each of these tools or formats have the same high-level goal: produce reproducible, dynamic (to changes in the data) reports."><meta name=author content><link rel=canonical href=https://tomaugspurger.net/posts/intro-stitch/><link crossorigin=anonymous href=/assets/css/stylesheet.ced21e6d3497ee93fed8f8b357448095840179bd510b5ea0e6013078712e6dd1.css integrity="sha256-ztIebTSX7pP+2PizV0SAlYQBeb1RC16g5gEweHEubdE=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG+9vmJ0cTS+ovo0FeA=" onload=hljs.initHighlightingOnLoad()></script><link rel=icon href=https://tomaugspurger.net/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://tomaugspurger.net/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://tomaugspurger.net/favicon-32x32.png><link rel=apple-touch-icon href=https://tomaugspurger.net/apple-touch-icon.png><link rel=mask-icon href=https://tomaugspurger.net/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://tomaugspurger.net/posts/intro-stitch/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:title" content="Introducing Stitch"><meta property="og:description" content="Today I released stitch into the wild. If you haven&rsquo;t yet, check out the examples page to see an example of what stitch does, and the Github repo for how to install. I&rsquo;m using this post to explain why I wrote stitch, and some issues it tries to solve.
Why knitr / knitpy / stitch / RMarkdown? Each of these tools or formats have the same high-level goal: produce reproducible, dynamic (to changes in the data) reports."><meta property="og:type" content="article"><meta property="og:url" content="https://tomaugspurger.net/posts/intro-stitch/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2016-08-30T00:00:00+00:00"><meta property="article:modified_time" content="2016-08-30T00:00:00+00:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="Introducing Stitch"><meta name=twitter:description content="Today I released stitch into the wild. If you haven&rsquo;t yet, check out the examples page to see an example of what stitch does, and the Github repo for how to install. I&rsquo;m using this post to explain why I wrote stitch, and some issues it tries to solve.
Why knitr / knitpy / stitch / RMarkdown? Each of these tools or formats have the same high-level goal: produce reproducible, dynamic (to changes in the data) reports."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://tomaugspurger.net/posts/"},{"@type":"ListItem","position":2,"name":"Introducing Stitch","item":"https://tomaugspurger.net/posts/intro-stitch/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Introducing Stitch","name":"Introducing Stitch","description":"Today I released stitch into the wild. If you haven\u0026rsquo;t yet, check out the examples page to see an example of what stitch does, and the Github repo for how to install. I\u0026rsquo;m using this post to explain why I wrote stitch, and some issues it tries to solve.\nWhy knitr / knitpy / stitch / RMarkdown? Each of these tools or formats have the same high-level goal: produce reproducible, dynamic (to changes in the data) reports.","keywords":[],"articleBody":"Today I released stitch into the wild. If you haven’t yet, check out the examples page to see an example of what stitch does, and the Github repo for how to install. I’m using this post to explain why I wrote stitch, and some issues it tries to solve.\nWhy knitr / knitpy / stitch / RMarkdown? Each of these tools or formats have the same high-level goal: produce reproducible, dynamic (to changes in the data) reports. They take some source document (typically markdown) that’s a mixture of text and code and convert it to a destination output (HTML, PDF, docx, etc.).\nThe main difference from something like pandoc, is that these tools actually execute the code and interweave the output of the code back into the document.\nReproducibility is something I care very deeply about. My workflow when writing a report is typically\nprototype in the notebook or IPython REPL (data cleaning, modeling, visualizing, repeat) rewrite and cleanup those prototypes in a .py file that produces one or more outputs (figure, table, parameter, etc.) Write the prose contextualizing a figure or table in markdown Source output artifacts (figure or table) when converting the markdown to the final output This was fine, but had a lot of overhead, and separated the generated report from the code itself (which is sometimes, but not always, what you want).\nStitch aims to make this a simpler process. You (just) write your code and results all in one file, and call\nstitch input.md -o output.pdf Why not Jupyter Notebooks? A valid question, but I think misguided. I love the notebook, and I use it every day for exploratory research. That said, there’s a continuum between all-text reports, and all-code reports. For reports that have a higher ratio of text:code, I prefer writing in my comfortable text-editor (yay spellcheck!) and using stitch / pandoc to compile the document. For reports that have more code:text, or that are very early on in their lifecycle, I prefer notebooks. Use the right tool for the job.\nWhen writing my pandas ebook, I had to jump through hoops to get from notebook source to final output (epub or PDF) that looked OK. NBConvert was essential to that workflow, and I couldn’t have done without it. I hope that the stitch-based workflow is a bit smoother.\nIf a tool similar to podoc is developed, then we can have transparent conversion between text-files with executable blocks of code and notebooks. Living the dream.\nWhy python? While RMarkdown / knitr are great (and way more usable than stitch at this point), they’re essentially only for R. The support for other languages (last I checked) is limited to passing a code chunk into the python command-line executable. All state is lost between code chunks.\nStitch supports any language that implements a Jupyter kernel, which is a lot.\nAdditionally, when RStudio introduced R Notebooks, they did so with their own file format, rather than adopting the Jupyter notebook format. I assume that they were aware of the choice when going their own way, and made it for the right reasons. But for these types of tasks (things creating documents) I prefer language-agnostic tools where possible. It’s certain that RMarkdown / knitr are better than stitch right now for rendering .Rmd files. It’s quite likely that they will always be better at working with R than stitch; specialized tools exist for a reason.\nMisc. Stitch was heavily inspired by Jan Schulz’s knitpy, so you might want to check that out and see if it fits your needs better. Thanks to Jan for giving guidance on difficulty areas he ran into when writing knitpy.\nI wrote stitch in about three weeks of random nights and weekends I had free. I stole time that from family or maintaining pandas. Thanks to my wife and the pandas maintainers for picking up my slack.\nThe three week thing isn’t a boast. It’s a testament to the rich libraries already available. Stitch simply would not exist if we couldn’t reuse\npandoc via pypandoc for parsing markdown and converting to the destination output (and for installing pandoc via conda-forge) Jupyter for providing kernels as execution contexts and a client for easily communicating with them. pandocfilters for wrapping code-chunk output And of course RMarkdown, knitr, and knitpy for proving that a library like this is useful and giving a design that works.\nStitch is still extremely young. It could benefit from users trying it out, and letting me know what’s working and what isn’t. Please do give it a shot and let me know what you think.\n© Tom Augspurger\n","wordCount":"768","inLanguage":"en","datePublished":"2016-08-30T00:00:00Z","dateModified":"2016-08-30T00:00:00Z","mainEntityOfPage":{"@type":"WebPage","@id":"https://tomaugspurger.net/posts/intro-stitch/"},"publisher":{"@type":"Organization","name":"Tom's Blog","logo":{"@type":"ImageObject","url":"https://tomaugspurger.net/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://tomaugspurger.net/ accesskey=h title="Tom's Blog (Alt + H)">Tom's Blog</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button><ul class=lang-switch><li>|</li></ul></div></div><ul id=menu><li><a href=https://tomaugspurger.net/about/ title=About><span>About</span></a></li><li><a href=https://tomaugspurger.net/archives title=Archive><span>Archive</span></a></li><li><a href=https://tomaugspurger.net/index.xml title=RSS><span>RSS</span></a></li><li><a href=https://tomaugspurger.net/tags title=Tags><span>Tags</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class="post-title entry-hint-parent">Introducing Stitch</h1><div class=post-meta><span title='2016-08-30 00:00:00 +0000 UTC'>August 30, 2016</span></div></header><div class=post-content><p>Today I released <a href=https://github.com/pystitch/stitch><code>stitch</code></a> into the
wild. If you haven&rsquo;t yet, check out the <a href=https://pystitch.github.io>examples
page</a> to see an example of what stitch does,
and the <a href=https://github.com/pystitch/stitch>Github repo</a> for how to
install. I&rsquo;m using this post to explain why I wrote stitch, and some
issues it tries to solve.</p><h2 id=why-knitrhttpyihuinameknitr--knitpyhttpsgithubcomjanschulzknitpy--stitch--rmarkdownhttprmarkdownrstudiocom>Why <a href=http://yihui.name/knitr/>knitr</a> / <a href=https://github.com/janschulz/knitpy>knitpy</a> / stitch / <a href=http://rmarkdown.rstudio.com>RMarkdown</a>?<a hidden class=anchor aria-hidden=true href=#why-knitrhttpyihuinameknitr--knitpyhttpsgithubcomjanschulzknitpy--stitch--rmarkdownhttprmarkdownrstudiocom>#</a></h2><p>Each of these tools or formats have the same high-level goal: produce
reproducible, dynamic (to changes in the data) reports. They take some
source document (typically markdown) that&rsquo;s a mixture of text and code
and convert it to a destination output (HTML, PDF, docx, etc.).</p><p>The main difference from something like pandoc, is that these tools
actually execute the code and interweave the output of the code back
into the document.</p><p>Reproducibility is something I care very deeply about. My workflow when
writing a report is typically</p><ul><li>prototype in the notebook or IPython REPL (data cleaning, modeling,
visualizing, repeat)</li><li>rewrite and cleanup those prototypes in a <code>.py</code> file that produces
one or more outputs (figure, table, parameter, etc.)</li><li>Write the prose contextualizing a figure or table in markdown</li><li>Source output artifacts (figure or table) when converting the
markdown to the final output</li></ul><p>This was fine, but had a lot of overhead, and separated the generated
report from the code itself (which is sometimes, but not always, what
you want).</p><p>Stitch aims to make this a simpler process. You (just) write your code
and results all in one file, and call</p><pre tabindex=0><code>stitch input.md -o output.pdf
</code></pre><h2 id=why-not-jupyter-notebooks>Why not Jupyter Notebooks?<a hidden class=anchor aria-hidden=true href=#why-not-jupyter-notebooks>#</a></h2><p>A valid question, but I think misguided. I love the notebook, and I use
it every day for exploratory research. That said, there&rsquo;s a continuum
between all-text reports, and all-code reports. For reports that have a
higher ratio of <code>text:code</code>, I prefer writing in my comfortable
text-editor (yay spellcheck!) and using stitch / pandoc to compile the
document. For reports that have more <code>code:text</code>, or that are very early
on in their lifecycle, I prefer notebooks. Use the right tool for the
job.</p><p>When writing my <a href=https://leanpub.com/effective-pandas>pandas ebook</a>, I
had to <a href=https://github.com/TomAugspurger/modern-pandas/blob/master/Makefile>jump through
hoops</a>
to get from notebook source to final output (epub or PDF) that looked
OK. <a href=https://nbconvert.readthedocs.io>NBConvert</a> was essential to that
workflow, and I couldn&rsquo;t have done without it. I hope that the
stitch-based workflow is a bit smoother.</p><p>If a tool similar to <a href=https://github.com/podoc/podoc/>podoc</a> is
developed, then we can have transparent conversion between text-files
with executable blocks of code and notebooks. Living the dream.</p><h2 id=why-python>Why python?<a hidden class=anchor aria-hidden=true href=#why-python>#</a></h2><p>While RMarkdown / knitr are great (and way more usable than stitch at
this point), they&rsquo;re essentially only for R. The support for other
languages (last I checked) is limited to passing a code chunk into the
<code>python</code> command-line executable. All state is lost between code chunks.</p><p><em>Stitch supports any language that implements a Jupyter kernel</em>, which
is <a href=https://github.com/ipython/ipython/wiki/IPython-kernels-for-other-languages>a
lot</a>.</p><p>Additionally, when RStudio introduced <a href=http://rmarkdown.rstudio.com/r_notebooks.html>R
Notebooks</a>, they did so
with their own file format, rather than adopting the Jupyter notebook
format. I assume that they were aware of the choice when going their own
way, and made it for the right reasons. But for these types of tasks
(things creating documents) I prefer language-agnostic tools <em>where
possible</em>. It&rsquo;s certain that RMarkdown / knitr are better than stitch
right now for rendering <code>.Rmd</code> files. It&rsquo;s quite likely that they will
<em>always</em> be better at working with R than stitch; specialized tools
exist for a reason.</p><h2 id=misc>Misc.<a hidden class=anchor aria-hidden=true href=#misc>#</a></h2><p>Stitch was heavily inspired by Jan Schulz&rsquo;s
<a href=https://github.com/janschulz/knitpy>knitpy</a>, so you might want to
check that out and see if it fits your needs better. Thanks to Jan for
giving guidance on difficulty areas he ran into when writing knitpy.</p><p>I wrote stitch in about three weeks of random nights and weekends I had
free. I stole time that from family or maintaining pandas. Thanks to my
wife and the pandas maintainers for picking up my slack.</p><p>The three week thing isn&rsquo;t a boast. It&rsquo;s a testament to the rich
libraries already available. Stitch simply would not exist if we
couldn&rsquo;t reuse</p><ul><li><a href=http://pandoc.org>pandoc</a> via
<a href=https://pypi.python.org/pypi/pypandoc>pypandoc</a> for parsing
markdown and converting to the destination output (and for
installing pandoc via conda-forge)</li><li><a href=http://jupyter.readthedocs.io/en/latest/>Jupyter</a> for providing
kernels as execution contexts and a
<a href=https://jupyter-client.readthedocs.io>client</a> for easily
communicating with them.</li><li><a href=https://github.com/jgm/pandocfilters>pandocfilters</a> for wrapping
code-chunk output</li></ul><p>And of course RMarkdown, knitr, and knitpy for proving that a library
like this is useful and giving a design that works.</p><p>Stitch is still extremely young. It could benefit from users trying it
out, and letting me know what&rsquo;s working and what isn&rsquo;t. Please do give
it a shot and let me know what you think.</p><p>© Tom Augspurger</p></div><footer class=post-footer><ul class=post-tags></ul></footer></article></main><footer class=footer><span>&copy; 2024 <a href=https://tomaugspurger.net/>Tom's Blog</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><a rel=me href=https://mastodon.social/@TomAugspurger></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>